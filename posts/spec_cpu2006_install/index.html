<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Install / execute spec cpu2006 benchmark | hacklog</title>
<meta name=keywords content="spec,benchmark,spec_cpu,spec_cpu2006"><meta name=description content="SPEC, which is a standard corporation for the benchmark[1], makes and shares various benchmark suites. SPEC CPU 2006[1] is one of those benchmark suites. It has made to measure performance of computation intensive workload and widely being used now. It has released v1.0 in 2006, 1.1 in 2008, and 1.2 in 2011. This post briefly describes the way to install and execute the SPEC CPU 2006 v1.1 on Ubuntu 16.04 servers."><meta name=author content="Me"><link rel=canonical href=https://sjp38.github.io/posts/spec_cpu2006_install/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://sjp38.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://sjp38.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://sjp38.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://sjp38.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://sjp38.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://sjp38.github.io/posts/spec_cpu2006_install/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Install / execute spec cpu2006 benchmark"><meta property="og:description" content="SPEC, which is a standard corporation for the benchmark[1], makes and shares various benchmark suites. SPEC CPU 2006[1] is one of those benchmark suites. It has made to measure performance of computation intensive workload and widely being used now. It has released v1.0 in 2006, 1.1 in 2008, and 1.2 in 2011. This post briefly describes the way to install and execute the SPEC CPU 2006 v1.1 on Ubuntu 16.04 servers."><meta property="og:type" content="article"><meta property="og:url" content="https://sjp38.github.io/posts/spec_cpu2006_install/"><meta property="og:image" content="https://sjp38.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-03-29T05:10:55+09:00"><meta property="article:modified_time" content="2017-03-29T05:10:55+09:00"><meta property="og:site_name" content="hacklog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://sjp38.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Install / execute spec cpu2006 benchmark"><meta name=twitter:description content="SPEC, which is a standard corporation for the benchmark[1], makes and shares various benchmark suites. SPEC CPU 2006[1] is one of those benchmark suites. It has made to measure performance of computation intensive workload and widely being used now. It has released v1.0 in 2006, 1.1 in 2008, and 1.2 in 2011. This post briefly describes the way to install and execute the SPEC CPU 2006 v1.1 on Ubuntu 16.04 servers."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://sjp38.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Install / execute spec cpu2006 benchmark","item":"https://sjp38.github.io/posts/spec_cpu2006_install/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Install / execute spec cpu2006 benchmark","name":"Install \/ execute spec cpu2006 benchmark","description":"SPEC, which is a standard corporation for the benchmark[1], makes and shares various benchmark suites. SPEC CPU 2006[1] is one of those benchmark suites. It has made to measure performance of computation intensive workload and widely being used now. It has released v1.0 in 2006, 1.1 in 2008, and 1.2 in 2011. This post briefly describes the way to install and execute the SPEC CPU 2006 v1.1 on Ubuntu 16.04 servers.","keywords":["spec","benchmark","spec_cpu","spec_cpu2006"],"articleBody":"SPEC, which is a standard corporation for the benchmark[1], makes and shares various benchmark suites. SPEC CPU 2006[1] is one of those benchmark suites. It has made to measure performance of computation intensive workload and widely being used now. It has released v1.0 in 2006, 1.1 in 2008, and 1.2 in 2011. This post briefly describes the way to install and execute the SPEC CPU 2006 v1.1 on Ubuntu 16.04 servers.\nAutomated Toolbox For those who might say TL; DR, I wrote a script that can install and execute the SPEC CPU 2006 with one command[1]. If you have no time to read further, just use it, please.\n[1] https://github.com/sjp38/spec_on_ubuntu_xenial\nTest Environment The test machine I used for this post has:\nIntel Xeon E7-8870 v3 Linux 4.10 kernel Ubuntu 16.04.1 Server version Get The Source Code You should get the source code first. You can buy SPEC CPU 2006 in DVD or .iso file format (As of March 2017, the cost of the SPEC CPU 2006 v1.2 is $800). There are source code of the benchmarks, source code of tool programs that helps compile, execution, and verification of the benchmarks, pre-compiled tool programs, rule files for the execution of the benchmarks, and documents. This post is written basedon SPEC CPU 2006 v1.1. If you got the .iso file, you can access to the files in it by mounting it as below:\n$ mkdir tmnt $ sudo mount -o loop SPEC_CPU2006v1.1.iso ./tmnt $ ls tmnt It is ok to directly install and execute the benchmarks, but I prefer to first copy the files outside of the mounted dir. The owner of the files is root, as the above command mounted the file via the sudo command. Change the owner to you as below:\n$ mkdir SPEC_CPU2006v1.1 $ cp -R ./tmnt/* SPEC_CPU2006v1.1/ $ sudo umount ./tmnt \u0026\u0026 rm -fr ./tmnt $ sudo chown -R SPEC_CPU2006v1.1 $ sudo chmod -R 755 SPEC_CPU2006v1.1 $ cd SPEC_CPU2006v1.1 Build The Tools The .iso file has executable binaries for the tools, which is built for various platforms such as redhat and suse. But, there is no binary for Ubuntu. Therefore, you should build the tools from the source code as below:\n$ cd tools/src $ ./buildtools buildtools is a shell script which builds tools under tools/src. But, you may encounter some errors. Following sections describe the errors and how you can solve it.\nConflicting types for ‘getline’ Build of md5sum will show you following error message:\ngcc -DHAVE_CONFIG_H -I/home/sjpark/SPEC_CPU2006v1.1/tools/output/include -I. -Ilib -c -o md5sum.o md5sum.c In file included from md5sum.c:38:0: lib/getline.h:31:1: error: conflicting types for 'getline' getline PARAMS ((char **_lineptr, size_t *_n, FILE *_stream)); ^ Type conflict is occurred because getline() and getdelim() functions are declared in stdio.h, but those are declared again in getline.h file. You can fix this as below, by checking GLIBC version.\n--- a/tools/src/specmd5sum/lib/getline.h +++ b/tools/src/specmd5sum/lib/getline.h @@ -27,10 +27,14 @@ Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA. */ # endif # endif +# if __GLIBC__ \u003c 2 + int getline PARAMS ((char **_lineptr, size_t *_n, FILE *_stream)); int getdelim PARAMS ((char **_lineptr, size_t *_n, int _delimiter, FILE *_stream)); +#endif + #endif /* not GETLINE_H_ */ Undefined reference to pow I referenced an internet post[3] to solve this and following two problems.\nNow, you will see below error message while building perl.\ncc -L/home/sjpark/SPEC_CPU2006v1.1/tools/output/lib -L/usr/local/lib -o miniperl \\ miniperlmain.o opmini.o libperl.a libperl.a(pp.o): In function `Perl_pp_pow': pp.c:(.text+0x2a76): undefined reference to `pow' It failed to find pow functiona. You should modify it to link libm library. You can solve this problem by setting PERLFLAGS env variable and executing buildtools again:\n$ PERLFLAGS=\"-A libs=-lm -A libs=-ldl\" ./buildtools\nYou haven’t done a “make depend” yet! Now, you see below error message.\nYou haven't done a \"make depend\" yet! make[1]: *** [hash.o] Error 1 The bin/sh which is used while building perl directs to /bin/dash. This problem made by dash. Simply modify the symbolic link so that it can use bash instead.\n$ sudo rm /bin/sh $ sudo ln -s /bin/bash /bin/sh If you want it to revert this change, simply restore the symbolic link again.\nasm/page.h file not found tools/src/perl-5.8.8/ext/IPC/SysV/SysV.xs is including a kernel header file, asm/page.h.\ncc -c -I/home/sjpark/SPEC_CPU2006v1.1/tools/output/include -fno-strict-aliasing -pipe -Wdeclaration-after-statement -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2 -DVERSION=\\\"1.04\\\" -DXS_VERSION=\\\"1.04\\\" -fpic \"-I../../..\" SysV.c SysV.xs:7:25: fatal error: asm/page.h: No such file or directory Block the include statement in the SysV.xs file and define PAGE_SIZE as below.\n--- a/tools/src/perl-5.8.8/ext/IPC/SysV/SysV.xs +++ b/tools/src/perl-5.8.8/ext/IPC/SysV/SysV.xs @@ -4,7 +4,7 @@ #include #ifdef __linux__ -# include +#define PAGE_SIZE 4096 #endif perl test fail If you apply every solution above and run $ PERLFLAGS=\"-A libs=-lm -A libs=-ldl\" ./buildtools, about 9 of 900 tests for the perl fails. Because those tests are ignorable, just answer to ignore (Simply enter y as the prompt explains).\nFailed 9 test scripts out of 907, 99.01% okay. ### Since not all tests were successful, you may want to run some of ### them individually and examine any diagnostic messages they produce. ### See the INSTALL document's section on \"make test\". ### You have a good chance to get more information by running ### ./perl harness ### in the 't' directory since most (\u003e=80%) of the tests succeeded. ### You may have to set your dynamic library search path, ### LD_LIBRARY_PATH, to point to the build directory: ### setenv LD_LIBRARY_PATH `pwd`:$LD_LIBRARY_PATH; cd t; ./perl harness ### LD_LIBRARY_PATH=`pwd`:$LD_LIBRARY_PATH; export LD_LIBRARY_PATH; cd t; ./perl harness ### export LD_LIBRARY_PATH=`pwd`:$LD_LIBRARY_PATH; cd t; ./perl harness ### for csh-style shells, like tcsh; or for traditional/modern ### Bourne-style shells, like bash, ksh, and zsh, respectively. u=0.92 s=0.69 cu=89.23 cs=5.47 scripts=907 tests=112394 make[2]: *** [_test_tty] Error 1 make[2]: Leaving directory `/home/sjpark/SPEC_CPU2006v1.1/tools/src/perl-5.8.8' make[1]: *** [_test] Error 2 make[1]: Leaving directory `/home/sjpark/SPEC_CPU2006v1.1/tools/src/perl-5.8.8' make: *** [test] Error 2 + '[' 2 -ne 0 ']' + set +x Hey! Some of the Perl tests failed! If you think this is okay, enter y now: Build success Finally, the build step completes.\nTools built successfully. Go to the top of the tree and source the shrc file. Then you should be ready. $ Execution Configuration File Now you can execute the benchmarks. For this, you should configure the execution environemnts of the benchmarks. There are example configuration files under config/ dir.\nExample-linux64-amd64-gcc43.cfg would be appropriate for the test system I use for this post. You can modify this file as you want. In my test, I just copied the file to config/config.cfg file.\nEnvironment Setup For execution of SPEC CPU benchmarks, you should set various environemnt variables. Below simple one command do that for you.\n$ source ./shrc Running Workload runspec program is used for the execution of each benchmark. This program is located under bin/ dir of the SPEC CPU source code, but you can use it directly without entering path, as the above envrionment variables setting has registered it as $PATH. For example, if you want to execute mcf benchmark, you can use below command:\n$ runspec --iterations 1 --size ref --action onlyrun --config config.cfg --noreportable mcf This command executes mcf benchmark and prints the path to the log file describing the execution results.\n... Run Complete The log for this run is in /home/username/spec/spec_src/result/CPU2006.003.log runspec finished at Sun Sep 24 13:55:14 2017; 290 total seconds elapsed To do some experiments for your particular use case, you should understand the usage of runspec. Because it is an out of scope of this post, reference to other documents, please.\nConclusion This post described the way to run SPEC CPU 2006 on an Ubuntu 16.04 system.\nReferences [0] http://spec.org/\n[1] http://spec.org/benchmarks.html#cpu\n[2] http://spec.org/order.html\n[3] https://wiki.linaro.org/MichaelHope/Sandbox/BuildingSPECTools\n","wordCount":"1256","inLanguage":"en","image":"https://sjp38.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2017-03-29T05:10:55+09:00","dateModified":"2017-03-29T05:10:55+09:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://sjp38.github.io/posts/spec_cpu2006_install/"},"publisher":{"@type":"Organization","name":"hacklog","logo":{"@type":"ImageObject","url":"https://sjp38.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://sjp38.github.io/ accesskey=h title="hacklog (Alt + H)"><img src=https://sjp38.github.io/apple-touch-icon.png alt aria-label=logo height=35>hacklog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://sjp38.github.io/posts/ title=posts><span>posts</span></a></li><li><a href=https://sjp38.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://sjp38.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://sjp38.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://sjp38.github.io/files/resume_sjpark.pdf title=cv><span>cv</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://sjp38.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://sjp38.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Install / execute spec cpu2006 benchmark</h1><div class=post-meta><span title='2017-03-29 05:10:55 +0900 +0900'>March 29, 2017</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;1256 words&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/sjp38/sjp38.github.io/tree/master/src/content/posts/spec_cpu2006_install.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#conflicting-types-for-getline>Conflicting types for &lsquo;getline&rsquo;</a></li><li><a href=#undefined-reference-to-pow>Undefined reference to <code>pow</code></a></li><li><a href=#you-havent-done-a-make-depend-yet>You haven&rsquo;t done a &ldquo;make depend&rdquo; yet!</a></li><li><a href=#asmpageh-file-not-found><code>asm/page.h</code> file not found</a></li><li><a href=#perl-test-fail><code>perl</code> test fail</a></li><li><a href=#build-success>Build success</a></li></ul><ul><li><a href=#configuration-file>Configuration File</a></li><li><a href=#environment-setup>Environment Setup</a></li><li><a href=#running-workload>Running Workload</a></li></ul><ul><li><a href=#references>References</a></li></ul></nav></div></details></div><div class=post-content><p>SPEC, which is a standard corporation for the benchmark[1], makes and shares
various benchmark suites. SPEC CPU 2006[1] is one of those benchmark suites.
It has made to measure performance of computation intensive workload and widely
being used now. It has released v1.0 in 2006, 1.1 in 2008, and 1.2 in 2011.
This post briefly describes the way to install and execute the SPEC CPU 2006
v1.1 on Ubuntu 16.04 servers.</p><h1 id=automated-toolbox>Automated Toolbox<a hidden class=anchor aria-hidden=true href=#automated-toolbox>#</a></h1><p>For those who might say <code>TL; DR</code>, I wrote a script that can install and execute
the SPEC CPU 2006 with one command[1]. If you have no time to read further,
just use it, please.</p><p>[1] <a href=https://github.com/sjp38/spec_on_ubuntu_xenial>https://github.com/sjp38/spec_on_ubuntu_xenial</a></p><h1 id=test-environment>Test Environment<a hidden class=anchor aria-hidden=true href=#test-environment>#</a></h1><p>The test machine I used for this post has:</p><ul><li>Intel Xeon E7-8870 v3</li><li>Linux 4.10 kernel</li><li>Ubuntu 16.04.1 Server version</li></ul><h1 id=get-the-source-code>Get The Source Code<a hidden class=anchor aria-hidden=true href=#get-the-source-code>#</a></h1><p>You should get the source code first. You can buy SPEC CPU 2006 in DVD or
<code>.iso</code> file format (As of March 2017, the cost of the SPEC CPU 2006 v1.2 is
$800).
There are source code of the benchmarks, source code of tool programs that
helps compile, execution, and verification of the benchmarks, pre-compiled tool
programs, rule files for the execution of the benchmarks, and documents.
This post is written basedon SPEC CPU 2006 v1.1.
If you got the <code>.iso</code> file, you can access to the files in it by mounting it as
below:</p><pre tabindex=0><code>$ mkdir tmnt
$ sudo mount -o loop SPEC_CPU2006v1.1.iso ./tmnt
$ ls tmnt
</code></pre><p>It is ok to directly install and execute the benchmarks, but I prefer to first
copy the files outside of the mounted dir.
The <code>owner</code> of the files is <code>root</code>, as the above command mounted the file via
the <code>sudo</code> command.
Change the owner to you as below:</p><pre tabindex=0><code>$ mkdir SPEC_CPU2006v1.1
$ cp -R ./tmnt/* SPEC_CPU2006v1.1/
$ sudo umount ./tmnt &amp;&amp; rm -fr ./tmnt
$ sudo chown -R &lt;username&gt; SPEC_CPU2006v1.1
$ sudo chmod -R 755 SPEC_CPU2006v1.1
$ cd SPEC_CPU2006v1.1
</code></pre><h1 id=build-the-tools>Build The Tools<a hidden class=anchor aria-hidden=true href=#build-the-tools>#</a></h1><p>The <code>.iso</code> file has executable binaries for the tools, which is built for
various platforms such as redhat and suse.
But, there is no binary for Ubuntu.
Therefore, you should build the tools from the source code as below:</p><pre tabindex=0><code>$ cd tools/src
$ ./buildtools
</code></pre><p><code>buildtools</code> is a shell script which builds tools under <code>tools/src</code>.
But, you may encounter some errors. Following sections describe the errors and
how you can solve it.</p><h2 id=conflicting-types-for-getline>Conflicting types for &lsquo;getline&rsquo;<a hidden class=anchor aria-hidden=true href=#conflicting-types-for-getline>#</a></h2><p>Build of <code>md5sum</code> will show you following error message:</p><pre tabindex=0><code>gcc -DHAVE_CONFIG_H    -I/home/sjpark/SPEC_CPU2006v1.1/tools/output/include   -I. -Ilib  -c -o md5sum.o md5sum.c
In file included from md5sum.c:38:0:
lib/getline.h:31:1: error: conflicting types for &#39;getline&#39;
 getline PARAMS ((char **_lineptr, size_t *_n, FILE *_stream));
 ^
</code></pre><p>Type conflict is occurred because <code>getline()</code> and <code>getdelim()</code> functions are
declared in <code>stdio.h</code>, but those are declared again in <code>getline.h</code> file.
You can fix this as below, by checking <code>GLIBC</code> version.</p><pre tabindex=0><code>--- a/tools/src/specmd5sum/lib/getline.h
+++ b/tools/src/specmd5sum/lib/getline.h
@@ -27,10 +27,14 @@ Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */
 #  endif
 # endif

+# if __GLIBC__ &lt; 2
+
 int
 getline PARAMS ((char **_lineptr, size_t *_n, FILE *_stream));

 int
 getdelim PARAMS ((char **_lineptr, size_t *_n, int _delimiter, FILE *_stream));

+#endif
+
 #endif /* not GETLINE_H_ */
</code></pre><h2 id=undefined-reference-to-pow>Undefined reference to <code>pow</code><a hidden class=anchor aria-hidden=true href=#undefined-reference-to-pow>#</a></h2><p>I referenced an internet post[3] to solve this and following two problems.</p><p>Now, you will see below error message while building <code>perl</code>.</p><pre tabindex=0><code>cc -L/home/sjpark/SPEC_CPU2006v1.1/tools/output/lib -L/usr/local/lib -o miniperl \
            miniperlmain.o opmini.o libperl.a
libperl.a(pp.o): In function `Perl_pp_pow&#39;:
pp.c:(.text+0x2a76): undefined reference to `pow&#39;
</code></pre><p>It failed to find <code>pow</code> functiona. You should modify it to link <code>libm</code>
library.
You can solve this problem by setting <code>PERLFLAGS</code> env variable and executing
<code>buildtools</code> again:</p><p><code>$ PERLFLAGS="-A libs=-lm -A libs=-ldl" ./buildtools</code></p><h2 id=you-havent-done-a-make-depend-yet>You haven&rsquo;t done a &ldquo;make depend&rdquo; yet!<a hidden class=anchor aria-hidden=true href=#you-havent-done-a-make-depend-yet>#</a></h2><p>Now, you see below error message.</p><pre tabindex=0><code>You haven&#39;t done a &#34;make depend&#34; yet!
make[1]: *** [hash.o] Error 1
</code></pre><p>The <code>bin/sh</code> which is used while building <code>perl</code> directs to <code>/bin/dash</code>.
This problem made by <code>dash</code>.
Simply modify the symbolic link so that it can use <code>bash</code> instead.</p><pre tabindex=0><code>$ sudo rm /bin/sh
$ sudo ln -s /bin/bash /bin/sh
</code></pre><p>If you want it to revert this change, simply restore the symbolic link again.</p><h2 id=asmpageh-file-not-found><code>asm/page.h</code> file not found<a hidden class=anchor aria-hidden=true href=#asmpageh-file-not-found>#</a></h2><p><code>tools/src/perl-5.8.8/ext/IPC/SysV/SysV.xs</code> is including a kernel header file,
<code>asm/page.h</code>.</p><pre tabindex=0><code>cc -c   -I/home/sjpark/SPEC_CPU2006v1.1/tools/output/include -fno-strict-aliasing -pipe -Wdeclaration-after-statement -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2   -DVERSION=\&#34;1.04\&#34; -DXS_VERSION=\&#34;1.04\&#34; -fpic &#34;-I../../..&#34;   SysV.c
SysV.xs:7:25: fatal error: asm/page.h: No such file or directory
</code></pre><p>Block the <code>include</code> statement in the <code>SysV.xs</code> file and define <code>PAGE_SIZE</code> as
below.</p><pre tabindex=0><code>--- a/tools/src/perl-5.8.8/ext/IPC/SysV/SysV.xs
+++ b/tools/src/perl-5.8.8/ext/IPC/SysV/SysV.xs
@@ -4,7 +4,7 @@

 #include &lt;sys/types.h&gt;
 #ifdef __linux__
-#   include &lt;asm/page.h&gt;
+#define PAGE_SIZE      4096
 #endif
</code></pre><h2 id=perl-test-fail><code>perl</code> test fail<a hidden class=anchor aria-hidden=true href=#perl-test-fail>#</a></h2><p>If you apply every solution above and run <code>$ PERLFLAGS="-A libs=-lm -A libs=-ldl" ./buildtools</code>, about 9 of 900 tests for the perl fails.
Because those tests are ignorable, just answer to ignore (Simply enter <code>y</code> as
the prompt explains).</p><pre tabindex=0><code>Failed 9 test scripts out of 907, 99.01% okay.
### Since not all tests were successful, you may want to run some of
### them individually and examine any diagnostic messages they produce.
### See the INSTALL document&#39;s section on &#34;make test&#34;.
### You have a good chance to get more information by running
###   ./perl harness
### in the &#39;t&#39; directory since most (&gt;=80%) of the tests succeeded.
### You may have to set your dynamic library search path,
### LD_LIBRARY_PATH, to point to the build directory:
###   setenv LD_LIBRARY_PATH `pwd`:$LD_LIBRARY_PATH; cd t; ./perl harness
###   LD_LIBRARY_PATH=`pwd`:$LD_LIBRARY_PATH; export LD_LIBRARY_PATH; cd t; ./perl harness
###   export LD_LIBRARY_PATH=`pwd`:$LD_LIBRARY_PATH; cd t; ./perl harness
### for csh-style shells, like tcsh; or for traditional/modern
### Bourne-style shells, like bash, ksh, and zsh, respectively.
u=0.92  s=0.69  cu=89.23  cs=5.47  scripts=907  tests=112394
make[2]: *** [_test_tty] Error 1
make[2]: Leaving directory `/home/sjpark/SPEC_CPU2006v1.1/tools/src/perl-5.8.8&#39;
make[1]: *** [_test] Error 2
make[1]: Leaving directory `/home/sjpark/SPEC_CPU2006v1.1/tools/src/perl-5.8.8&#39;
make: *** [test] Error 2
+ &#39;[&#39; 2 -ne 0 &#39;]&#39;
+ set +x


Hey!  Some of the Perl tests failed!  If you think this is okay, enter y now:
</code></pre><h2 id=build-success>Build success<a hidden class=anchor aria-hidden=true href=#build-success>#</a></h2><p>Finally, the build step completes.</p><pre tabindex=0><code>Tools built successfully.  Go to the top of the tree and
source the shrc file.  Then you should be ready.
$
</code></pre><h1 id=execution>Execution<a hidden class=anchor aria-hidden=true href=#execution>#</a></h1><h2 id=configuration-file>Configuration File<a hidden class=anchor aria-hidden=true href=#configuration-file>#</a></h2><p>Now you can execute the benchmarks.
For this, you should configure the execution environemnts of the benchmarks.
There are example configuration files under <code>config/</code> dir.<br><code>Example-linux64-amd64-gcc43.cfg</code> would be appropriate for the test system I
use for this post.
You can modify this file as you want.
In my test, I just copied the file to <code>config/config.cfg</code> file.</p><h2 id=environment-setup>Environment Setup<a hidden class=anchor aria-hidden=true href=#environment-setup>#</a></h2><p>For execution of SPEC CPU benchmarks, you should set various environemnt
variables. Below simple one command do that for you.</p><pre tabindex=0><code>$ source ./shrc
</code></pre><h2 id=running-workload>Running Workload<a hidden class=anchor aria-hidden=true href=#running-workload>#</a></h2><p><code>runspec</code> program is used for the execution of each benchmark.
This program is located under <code>bin/</code> dir of the SPEC CPU source code, but you
can use it directly without entering path, as the above envrionment variables
setting has registered it as <code>$PATH</code>.
For example, if you want to execute <code>mcf</code> benchmark, you can use below command:</p><pre tabindex=0><code>$ runspec --iterations 1 --size ref --action onlyrun --config config.cfg --noreportable mcf
</code></pre><p>This command executes <code>mcf</code> benchmark and prints the path to the log file
describing the execution results.</p><pre tabindex=0><code>...

Run Complete

The log for this run is in /home/username/spec/spec_src/result/CPU2006.003.log

runspec finished at Sun Sep 24 13:55:14 2017; 290 total seconds elapsed
</code></pre><p>To do some experiments for your particular use case, you should understand the
usage of <code>runspec</code>.
Because it is an out of scope of this post, reference to other documents,
please.</p><h1 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h1><p>This post described the way to run SPEC CPU 2006 on an Ubuntu 16.04 system.</p><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><p>[0] <a href=http://spec.org/>http://spec.org/</a><br>[1] <a href=http://spec.org/benchmarks.html#cpu>http://spec.org/benchmarks.html#cpu</a><br>[2] <a href=http://spec.org/order.html>http://spec.org/order.html</a><br>[3] <a href=https://wiki.linaro.org/MichaelHope/Sandbox/BuildingSPECTools>https://wiki.linaro.org/MichaelHope/Sandbox/BuildingSPECTools</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://sjp38.github.io/tags/spec/>Spec</a></li><li><a href=https://sjp38.github.io/tags/benchmark/>Benchmark</a></li><li><a href=https://sjp38.github.io/tags/spec_cpu/>Spec_cpu</a></li><li><a href=https://sjp38.github.io/tags/spec_cpu2006/>Spec_cpu2006</a></li></ul><nav class=paginav><a class=prev href=https://sjp38.github.io/posts/ko/xclip_copy_remote_clipboard/><span class=title>« Prev</span><br><span>원격 데스크탑의 clipboard 를 ssh 와 xclip 으로 복사해오기</span>
</a><a class=next href=https://sjp38.github.io/posts/ko/spec_cpu2006_install/><span class=title>Next »</span><br><span>spec cpu2006 벤치마크 설치 / 실행하기</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Install / execute spec cpu2006 benchmark on x" href="https://x.com/intent/tweet/?text=Install%20%2f%20execute%20spec%20cpu2006%20benchmark&amp;url=https%3a%2f%2fsjp38.github.io%2fposts%2fspec_cpu2006_install%2f&amp;hashtags=spec%2cbenchmark%2cspec_cpu%2cspec_cpu2006"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Install / execute spec cpu2006 benchmark on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fsjp38.github.io%2fposts%2fspec_cpu2006_install%2f&amp;title=Install%20%2f%20execute%20spec%20cpu2006%20benchmark&amp;summary=Install%20%2f%20execute%20spec%20cpu2006%20benchmark&amp;source=https%3a%2f%2fsjp38.github.io%2fposts%2fspec_cpu2006_install%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Install / execute spec cpu2006 benchmark on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fsjp38.github.io%2fposts%2fspec_cpu2006_install%2f&title=Install%20%2f%20execute%20spec%20cpu2006%20benchmark"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Install / execute spec cpu2006 benchmark on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fsjp38.github.io%2fposts%2fspec_cpu2006_install%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Install / execute spec cpu2006 benchmark on whatsapp" href="https://api.whatsapp.com/send?text=Install%20%2f%20execute%20spec%20cpu2006%20benchmark%20-%20https%3a%2f%2fsjp38.github.io%2fposts%2fspec_cpu2006_install%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Install / execute spec cpu2006 benchmark on telegram" href="https://telegram.me/share/url?text=Install%20%2f%20execute%20spec%20cpu2006%20benchmark&amp;url=https%3a%2f%2fsjp38.github.io%2fposts%2fspec_cpu2006_install%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Install / execute spec cpu2006 benchmark on ycombinator" href="https://news.ycombinator.com/submitlink?t=Install%20%2f%20execute%20spec%20cpu2006%20benchmark&u=https%3a%2f%2fsjp38.github.io%2fposts%2fspec_cpu2006_install%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://sjp38.github.io/>hacklog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>