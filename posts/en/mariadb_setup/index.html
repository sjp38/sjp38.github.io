<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Ubuntu 16.04 Server 위에 MariaDB 설치/사용하기 | hacklog</title>
<meta name=keywords content="db,database,dbms,mariadb"><meta name=description content="악의 조직 Oracle 에서 Sun 을 인수한 후 이어진 반 open source 적 행보에 MySQL 개발자는 MySQL 을 fork 해서 MariaDB 를 개발하고 있습니다. 저작권을 악용해 중요한 기능은 천천히 릴리즈 하거나 유료 라이센스로만 공개하기도 하는 Oracle 의 MySQL 과 달리 MariaDB 는 예전 MySQL 처럼 공개적으로 개발되고 있어 새롭고 진보적인 기능도 많이 있는 편인 것 같습니다.
이 글에서는 Ubuntu 16.04 서버에 MariaDB 를 소스코드부터 가져와서 설치하고 사용하는 간단한 사용법을 정리해 봅니다."><meta name=author content="Me"><link rel=canonical href=https://sjp38.github.io/posts/en/mariadb_setup/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://sjp38.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://sjp38.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://sjp38.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://sjp38.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://sjp38.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://sjp38.github.io/posts/en/mariadb_setup/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Ubuntu 16.04 Server 위에 MariaDB 설치/사용하기"><meta property="og:description" content="악의 조직 Oracle 에서 Sun 을 인수한 후 이어진 반 open source 적 행보에 MySQL 개발자는 MySQL 을 fork 해서 MariaDB 를 개발하고 있습니다. 저작권을 악용해 중요한 기능은 천천히 릴리즈 하거나 유료 라이센스로만 공개하기도 하는 Oracle 의 MySQL 과 달리 MariaDB 는 예전 MySQL 처럼 공개적으로 개발되고 있어 새롭고 진보적인 기능도 많이 있는 편인 것 같습니다.
이 글에서는 Ubuntu 16.04 서버에 MariaDB 를 소스코드부터 가져와서 설치하고 사용하는 간단한 사용법을 정리해 봅니다."><meta property="og:type" content="article"><meta property="og:url" content="https://sjp38.github.io/posts/en/mariadb_setup/"><meta property="og:image" content="https://sjp38.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-08-31T14:37:07+09:00"><meta property="article:modified_time" content="2017-08-31T14:37:07+09:00"><meta property="og:site_name" content="hacklog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://sjp38.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Ubuntu 16.04 Server 위에 MariaDB 설치/사용하기"><meta name=twitter:description content="악의 조직 Oracle 에서 Sun 을 인수한 후 이어진 반 open source 적 행보에 MySQL 개발자는 MySQL 을 fork 해서 MariaDB 를 개발하고 있습니다. 저작권을 악용해 중요한 기능은 천천히 릴리즈 하거나 유료 라이센스로만 공개하기도 하는 Oracle 의 MySQL 과 달리 MariaDB 는 예전 MySQL 처럼 공개적으로 개발되고 있어 새롭고 진보적인 기능도 많이 있는 편인 것 같습니다.
이 글에서는 Ubuntu 16.04 서버에 MariaDB 를 소스코드부터 가져와서 설치하고 사용하는 간단한 사용법을 정리해 봅니다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://sjp38.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Posts","item":"https://sjp38.github.io/posts/en/"},{"@type":"ListItem","position":3,"name":"Ubuntu 16.04 Server 위에 MariaDB 설치/사용하기","item":"https://sjp38.github.io/posts/en/mariadb_setup/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Ubuntu 16.04 Server 위에 MariaDB 설치/사용하기","name":"Ubuntu 16.04 Server 위에 MariaDB 설치\/사용하기","description":"악의 조직 Oracle 에서 Sun 을 인수한 후 이어진 반 open source 적 행보에 MySQL 개발자는 MySQL 을 fork 해서 MariaDB 를 개발하고 있습니다. 저작권을 악용해 중요한 기능은 천천히 릴리즈 하거나 유료 라이센스로만 공개하기도 하는 Oracle 의 MySQL 과 달리 MariaDB 는 예전 MySQL 처럼 공개적으로 개발되고 있어 새롭고 진보적인 기능도 많이 있는 편인 것 같습니다.\n이 글에서는 Ubuntu 16.04 서버에 MariaDB 를 소스코드부터 가져와서 설치하고 사용하는 간단한 사용법을 정리해 봅니다.","keywords":["db","database","dbms","mariadb"],"articleBody":"악의 조직 Oracle 에서 Sun 을 인수한 후 이어진 반 open source 적 행보에 MySQL 개발자는 MySQL 을 fork 해서 MariaDB 를 개발하고 있습니다. 저작권을 악용해 중요한 기능은 천천히 릴리즈 하거나 유료 라이센스로만 공개하기도 하는 Oracle 의 MySQL 과 달리 MariaDB 는 예전 MySQL 처럼 공개적으로 개발되고 있어 새롭고 진보적인 기능도 많이 있는 편인 것 같습니다.\n이 글에서는 Ubuntu 16.04 서버에 MariaDB 를 소스코드부터 가져와서 설치하고 사용하는 간단한 사용법을 정리해 봅니다.\nEnvironment 이 글에서는 Ubuntu 16.04.2 server 버전을 사용합니다.\nBuild and Install MariaDB 는 대부분의 리눅스 배포본을 위한 패키징이 잘 되어 있어서 각 배포본의 패키징 시스템을 사용하면 한두줄의 커맨드로 쉽게 설치할 수 있습니다. 하지만 여기선 문서[1] 를 참고해 가며 소스 코드부터 가져와서 바닥부터 가장 최신 버전을 설치해 보기로 합시다.\n소스코드는 github 에 git repository 의 형태로 공개되어 있습니다. 아래의 명령어로 코드를 mariadb/ 디렉토리 아래에 가져올 수 있습니다.\n$ git clone https://github.com/MariaDB/server.git mariadb $ cd mariadb git repository 인만큼 버전은 git 을 통해 tag 로 관리되고 있습니다. 이 글을 작성 중인 시점에서 가장 최신 stable 릴리즈는 10.2.8[2] 로, 2017년 8월 18일 자로 릴리즈 되었습니다. 다음 커맨드로 해당 버전의 코드를 checkout 할 수 있습니다:\n$ git checkout mariadb-10.2.8 이제 소스코드는 준비되었고, 빌드할 차례입니다. cmake 를 사용해 어떻게 빌드할지 등을 설정할 수 있는데, 여기선 release 할때 사용하는 설정을 사용해 보겠습니다. cmake 가 실패하는 경우는 대부분 필요 패키지가 설치되지 않은 경우입니다. libaio-dev, libjemalloc-dev, libgnutls-dev 등의 패키지가 설치되어 있어야 합니다.\n해당 패키지 설치 후에도 같은 에러 메세지가 나올 수 있는데, cmake 의 기존 결과가 캐싱되어 재사용되기 때문입니다. CMakeCache.txt 와 CMakeFiles/ 디렉토리를 제거해주면 캐싱된 내용은 사라집니다.\n이어서 간단히 make 를 사용해 빌드하고 설치를 할 수 있습니다. 설치는 super user 권한이 필요하기 때문에 sudo 를 사용해야 합니다.\n$ cmake . -DBUILD_CONFIG=mysql_release $ make $ sudo make install 어떤 사양의 머신에서 빌드하느냐에 따라 다르겠지만 빌드하는데 꽤 긴 시간이 걸립니다. 이 글을 작성하며 사용한 72 코어 / 144 쓰레드 머신에서는 -j144 옵션을 줘서 빌드할 경우 1분 5초 걸렸습니다. 별다른 에러 메세지가 없다면 빌드에 성공한 것입니다.\nInitialize MariaDB Server 이제 MariaDB 의 기본 설치는 마무리 되었지만, 아직 MariaDB 구동을 위한 준비가 모두 끝나진 않았습니다. MariaDB 가 제대로 동작하기 위해서는 test database, default user 등등의 최소 데이터를 생성하는 초기화 작업을 진행해야 합니다. 앞의 설치는 MariaDB 실행파일을 만들어 시스템에 설치한 것이고, 이 초기화 작업은 MariaDB 서비스의 설치라고 생각하면 이해가 조금 편할 수도 있겠습니다.\nsuper user 권한의 남용은 보안적으로 위험할 수 있으므로, MariaDB 는 기본적으로 별개의 사용자 계정을 사용할 것을 권장합니다. 다음 예에서는 mysql 이라는 이름의 user 를 생성하고 이 사용자 계정을 사용하도록 해서 초기화를 진행합니다.\n$ sudo adduser mysql $ sudo chown -R mysql /usr/local/mysql/ $ cd /usr/local/mysql/ $ sudo -u mysql ./scripts/mysql_install_db --user=mysql 순조롭게 진행되었다면 다음과 같은 메세지를 볼 수 있을 겁니다:\nInstalling MariaDB/MySQL system tables in './data' ... OK To start mysqld at boot time you have to copy support-files/mysql.server to the right place for your system PLEASE REMEMBER TO SET A PASSWORD FOR THE MariaDB root USER ! To do so, start the server, then issue the following commands: './bin/mysqladmin' -u root password 'new-password' './bin/mysqladmin' -u root -h hydra password 'new-password' Alternatively you can run: './bin/mysql_secure_installation' which will also give you the option of removing the test databases and anonymous user created by default. This is strongly recommended for production servers. See the MariaDB Knowledgebase at http://mariadb.com/kb or the MySQL manual for more instructions. You can start the MariaDB daemon with: cd '.' ; ./bin/mysqld_safe --datadir='./data' You can test the MariaDB daemon with mysql-test-run.pl cd './mysql-test' ; perl mysql-test-run.pl Please report any problems at http://mariadb.org/jira The latest information about MariaDB is available at http://mariadb.org/. You can find additional information about the MySQL part at: http://dev.mysql.com Consider joining MariaDB's strong and vibrant community: https://mariadb.org/get-involved/ Starting MariaDB 이제 준비가 끝났습니다. 앞의 초기화 과정 이후 나온 메세지에서도 알 수 있듯이, 다음 커맨드로 MariaDB 서버를 시작할 수 있습니다:\n$ sudo -u mysql /usr/local/mysql/bin/mysqld_safe --datadir='./data' Connect to Local MariaDB Server MariaDB 는 여러가지 방법으로 접근해 사용할 수 있는데, 관리 목적 등으로는 local shell 을 사용하는게 가장 간단합니다. 다음 커맨드로 local shell 을 열 수 있습니다. 이 커맨드는 같은 기계 위에 띄워져 있는 MariaDB 서버 프로세스에 접속해 해당 서버에 sql 쿼리를 날릴 수 있는 프롬프트를 띄워 줍니다.\n$ /usr/local/mysql/bin/mysql 위 커맨드에 –version 인자를 주면 현재 mariadb 의 버전도 볼 수 있습니다:\n$ /usr/local/mysql/bin/mysql --version /usr/local/mysql/bin/mysql Ver 15.1 Distrib 10.2.8-MariaDB, for Linux (x86_64) using readline 5.1 s Kill MariaDB Server 서버를 끝낼 수도 있어야겠죠. 다음의 커맨드로 mysql 서버 프로세스에게 SIGTERM 시그널을 날려서 서버 프로세스를 종료시킬 수 있습니다.\n$ sudo -u mysql kill -SIGTERM `pidof mysqld` Basical Usage 프롬프트에서 다음과 같이 기본적인 sql 쿼리를 날릴 수 있습니다.\n$ sudo /usr/local/mysql/bin/mysql \u003e create database sj_db; \u003e create table sjtable ( id INT PRIMARY KEY, name VARCHAR(20) ); \u003e insert into sjtable values ( 1, 'Will' ); \u003e select * from sjtable; 그 외의 MariaDB sql 문법을 위해서는 MariaDB basic sql statement 문서[3] 를 참고합시다.\nmy.cnf configuration mysql 과 마찬가지로 MariaDB 역시 my.cnf 파일을 사용해[1] 대부분의 설정을 구성합니다. 기본적으로 /etc/my.cnf, /etc/mysql/my.cnf … 순으로 설정 파일을 찾게 되며, mysqld_safe 실행파일 실행 시에 –defaults-file 인자로 파일 경로를 줄수도 있습니다. 소스 코드 디렉토리의 support-files/ 디렉토리 아래에 my-huge.cnf, my-large.cnf, my-medium.cnf 등의 예제 설정도 있습니다.\n앞의 과정을 따라서 설치하면 /etc/ 아래에 my.cnf 파일이 없을 겁니다. 이 때의 기본 설정은 어떻게 되는지는 다음 커맨드를 통해 알 수 있습니다.\n$ /usr/local/mysql/bin/mysql -NBe 'SHOW VARIABLES' askapache.com 에서는[5] 이를 이용해 기본 my.cnf 를 추출하는 커맨드도 소개하고 있으니 필요하면 참고하시기 바랍니다.\nData Directory Specification 실험용으로 MariaDB 를 사용하는 경우라면 MariaDB 데이터를 최초 상태로 백업해 두거나 서로 다른 설정의 데이터를 유지해야 할 수도 있습니다.\nMariaDB 의 default data directory 는 /usr/local/mysql/data/ 로, 프롬프트에서\n\u003e select @@datadir; 명령으로 현재 띄워진 MariaDB 서버 프로세스가 사용중인 data directory 의 경로를 볼 수 있습니다. 이 경로는 my.cnf 상에서 수정할 수도 있고, mysqld_safe 실행 시 –datadir 옵션으로 지정할 수도 있습니다. 주의할 점은, 이때 –datadir 인자로 주는 데이터 디렉토리는 한번은 scripts/mysql_install_db 를 실행해준 디렉토리여야 한다는 것입니다. mysql_install_db 명령에도 –datadir 인자를 줄수 있습니다.\nConclusion MariaDB 최신 버전의 소스코드를 가져와 빌드하고 설치해서 사용하는 방법을 알아봤습니다. 하나의 예제로 정리해 보자면 다음과 같습니다.\n$ git clone https://github.com/MariaDB/server.git mariadb $ cd mariadb $ git checkout mariadb-10.2.8 $ cmake . -DBUILD_CONFIG=mysql_release $ make $ sudo make install $ sudo adduser mysql $ sudo chown -R mysql /usr/local/mysql/ $ cd /usr/local/mysql/ $ sudo -u mysql ./scripts/mysql_install_db --datadirr='./data' \u0026 $ /usr/local/mysql/bin/mysql References [1] https://mariadb.com/kb/en/mariadb/generic-build-instructions/\n[2] https://downloads.mariadb.org/mariadb/+releases/\n[3] https://mariadb.com/kb/en/mariadb/basic-sql-statements/\n[4] https://mariadb.com/kb/en/mariadb/configuring-mariadb-with-mycnf/\n[5] https://www.askapache.com/mysql/view-mysql-variables-my-cnf/\n","wordCount":"1028","inLanguage":"en","image":"https://sjp38.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2017-08-31T14:37:07+09:00","dateModified":"2017-08-31T14:37:07+09:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://sjp38.github.io/posts/en/mariadb_setup/"},"publisher":{"@type":"Organization","name":"hacklog","logo":{"@type":"ImageObject","url":"https://sjp38.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://sjp38.github.io/ accesskey=h title="hacklog (Alt + H)"><img src=https://sjp38.github.io/apple-touch-icon.png alt aria-label=logo height=35>hacklog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://sjp38.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://sjp38.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://sjp38.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://sjp38.github.io/files/resume_sjpark.pdf title=cv><span>cv</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://sjp38.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://sjp38.github.io/posts/>Posts</a>&nbsp;»&nbsp;<a href=https://sjp38.github.io/posts/en/>Posts</a></div><h1 class="post-title entry-hint-parent">Ubuntu 16.04 Server 위에 MariaDB 설치/사용하기</h1><div class=post-meta><span title='2017-08-31 14:37:07 +0900 +0900'>August 31, 2017</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;1028 words&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/en/mariadb_setup.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents></nav></div></details></div><div class=post-content><p>악의 조직 Oracle 에서 Sun 을 인수한 후 이어진 반 open source 적 행보에 MySQL
개발자는 MySQL 을 fork 해서 MariaDB 를 개발하고 있습니다. 저작권을 악용해
중요한 기능은 천천히 릴리즈 하거나 유료 라이센스로만 공개하기도 하는 Oracle 의
MySQL 과 달리 MariaDB 는 예전 MySQL 처럼 공개적으로 개발되고 있어 새롭고
진보적인 기능도 많이 있는 편인 것 같습니다.</p><p>이 글에서는 Ubuntu 16.04 서버에 MariaDB 를 소스코드부터 가져와서 설치하고
사용하는 간단한 사용법을 정리해 봅니다.</p><h1 id=environment>Environment<a hidden class=anchor aria-hidden=true href=#environment>#</a></h1><p>이 글에서는 Ubuntu 16.04.2 server 버전을 사용합니다.</p><h1 id=build-and-install>Build and Install<a hidden class=anchor aria-hidden=true href=#build-and-install>#</a></h1><p>MariaDB 는 대부분의 리눅스 배포본을 위한 패키징이 잘 되어 있어서 각 배포본의
패키징 시스템을 사용하면 한두줄의 커맨드로 쉽게 설치할 수 있습니다. 하지만
여기선 문서[1] 를 참고해 가며 소스 코드부터 가져와서 바닥부터 가장 최신 버전을
설치해 보기로 합시다.</p><p>소스코드는 github 에 git repository 의 형태로 공개되어 있습니다. 아래의
명령어로 코드를 <code>mariadb/</code> 디렉토리 아래에 가져올 수 있습니다.</p><pre tabindex=0><code>$ git clone https://github.com/MariaDB/server.git mariadb
$ cd mariadb
</code></pre><p>git repository 인만큼 버전은 git 을 통해 tag 로 관리되고 있습니다. 이 글을
작성 중인 시점에서 가장 최신 stable 릴리즈는 10.2.8[2] 로, 2017년 8월 18일
자로 릴리즈 되었습니다. 다음 커맨드로 해당 버전의 코드를 checkout 할 수
있습니다:</p><pre tabindex=0><code>$ git checkout mariadb-10.2.8
</code></pre><p>이제 소스코드는 준비되었고, 빌드할 차례입니다. <code>cmake</code> 를 사용해 어떻게
빌드할지 등을 설정할 수 있는데, 여기선 release 할때 사용하는 설정을 사용해
보겠습니다. <code>cmake</code> 가 실패하는 경우는 대부분 필요 패키지가 설치되지 않은
경우입니다. <code>libaio-dev</code>, <code>libjemalloc-dev</code>, <code>libgnutls-dev</code> 등의 패키지가
설치되어 있어야 합니다.</p><p>해당 패키지 설치 후에도 같은 에러 메세지가 나올 수 있는데, cmake 의 기존 결과가
캐싱되어 재사용되기 때문입니다. <code>CMakeCache.txt</code> 와 <code>CMakeFiles/</code> 디렉토리를
제거해주면 캐싱된 내용은 사라집니다.</p><p>이어서 간단히 <code>make</code> 를 사용해 빌드하고 설치를 할 수 있습니다.
설치는 super user 권한이 필요하기 때문에 <code>sudo</code> 를 사용해야 합니다.</p><pre tabindex=0><code>$ cmake . -DBUILD_CONFIG=mysql_release
$ make
$ sudo make install
</code></pre><p>어떤 사양의 머신에서 빌드하느냐에 따라 다르겠지만 빌드하는데 꽤 긴 시간이
걸립니다. 이 글을 작성하며 사용한 72 코어 / 144 쓰레드 머신에서는 <code>-j144</code>
옵션을 줘서 빌드할 경우 1분 5초 걸렸습니다. 별다른 에러 메세지가 없다면 빌드에
성공한 것입니다.</p><h1 id=initialize-mariadb-server>Initialize MariaDB Server<a hidden class=anchor aria-hidden=true href=#initialize-mariadb-server>#</a></h1><p>이제 MariaDB 의 기본 설치는 마무리 되었지만, 아직 MariaDB 구동을 위한 준비가
모두 끝나진 않았습니다. MariaDB 가 제대로 동작하기 위해서는 test database,
default user 등등의 최소 데이터를 생성하는 초기화 작업을 진행해야 합니다. 앞의
설치는 MariaDB 실행파일을 만들어 시스템에 설치한 것이고, 이 초기화 작업은
MariaDB 서비스의 설치라고 생각하면 이해가 조금 편할 수도 있겠습니다.</p><p>super user 권한의 남용은 보안적으로 위험할 수 있으므로, MariaDB 는 기본적으로
별개의 사용자 계정을 사용할 것을 권장합니다. 다음 예에서는 mysql 이라는 이름의
user 를 생성하고 이 사용자 계정을 사용하도록 해서 초기화를 진행합니다.</p><pre tabindex=0><code>$ sudo adduser mysql
$ sudo chown -R mysql /usr/local/mysql/
$ cd /usr/local/mysql/
$ sudo -u mysql ./scripts/mysql_install_db --user=mysql
</code></pre><p>순조롭게 진행되었다면 다음과 같은 메세지를 볼 수 있을 겁니다:</p><pre tabindex=0><code>Installing MariaDB/MySQL system tables in &#39;./data&#39; ...
OK

To start mysqld at boot time you have to copy
support-files/mysql.server to the right place for your system

PLEASE REMEMBER TO SET A PASSWORD FOR THE MariaDB root USER !
To do so, start the server, then issue the following commands:

&#39;./bin/mysqladmin&#39; -u root password &#39;new-password&#39;
&#39;./bin/mysqladmin&#39; -u root -h hydra password &#39;new-password&#39;

Alternatively you can run:
&#39;./bin/mysql_secure_installation&#39;

which will also give you the option of removing the test
databases and anonymous user created by default.  This is
strongly recommended for production servers.

See the MariaDB Knowledgebase at http://mariadb.com/kb or the
MySQL manual for more instructions.

You can start the MariaDB daemon with:
cd &#39;.&#39; ; ./bin/mysqld_safe --datadir=&#39;./data&#39;

You can test the MariaDB daemon with mysql-test-run.pl
cd &#39;./mysql-test&#39; ; perl mysql-test-run.pl

Please report any problems at http://mariadb.org/jira

The latest information about MariaDB is available at http://mariadb.org/.
You can find additional information about the MySQL part at:
http://dev.mysql.com
Consider joining MariaDB&#39;s strong and vibrant community:
https://mariadb.org/get-involved/
</code></pre><h1 id=starting-mariadb>Starting MariaDB<a hidden class=anchor aria-hidden=true href=#starting-mariadb>#</a></h1><p>이제 준비가 끝났습니다. 앞의 초기화 과정 이후 나온 메세지에서도 알 수 있듯이,
다음 커맨드로 MariaDB 서버를 시작할 수 있습니다:</p><pre tabindex=0><code>$ sudo -u mysql /usr/local/mysql/bin/mysqld_safe --datadir=&#39;./data&#39;
</code></pre><h1 id=connect-to-local-mariadb-server>Connect to Local MariaDB Server<a hidden class=anchor aria-hidden=true href=#connect-to-local-mariadb-server>#</a></h1><p>MariaDB 는 여러가지 방법으로 접근해 사용할 수 있는데, 관리 목적 등으로는 local
shell 을 사용하는게 가장 간단합니다. 다음 커맨드로 local shell 을 열 수
있습니다. 이 커맨드는 같은 기계 위에 띄워져 있는 MariaDB 서버 프로세스에
접속해 해당 서버에 sql 쿼리를 날릴 수 있는 프롬프트를 띄워 줍니다.</p><pre tabindex=0><code>$ /usr/local/mysql/bin/mysql
</code></pre><p>위 커맨드에 &ndash;version 인자를 주면 현재 mariadb 의 버전도 볼 수 있습니다:</p><pre tabindex=0><code>$ /usr/local/mysql/bin/mysql --version
/usr/local/mysql/bin/mysql  Ver 15.1 Distrib 10.2.8-MariaDB, for Linux (x86_64) using readline 5.1
s
</code></pre><h1 id=kill-mariadb-server>Kill MariaDB Server<a hidden class=anchor aria-hidden=true href=#kill-mariadb-server>#</a></h1><p>서버를 끝낼 수도 있어야겠죠. 다음의 커맨드로 mysql 서버 프로세스에게 SIGTERM
시그널을 날려서 서버 프로세스를 종료시킬 수 있습니다.</p><pre tabindex=0><code>$ sudo -u mysql kill -SIGTERM `pidof mysqld`
</code></pre><h1 id=basical-usage>Basical Usage<a hidden class=anchor aria-hidden=true href=#basical-usage>#</a></h1><p>프롬프트에서 다음과 같이 기본적인 sql 쿼리를 날릴 수 있습니다.</p><pre tabindex=0><code>$ sudo /usr/local/mysql/bin/mysql
&gt; create database sj_db;
&gt; create table sjtable ( id INT PRIMARY KEY, name VARCHAR(20) );
&gt; insert into sjtable values ( 1, &#39;Will&#39; );
&gt; select * from sjtable;
</code></pre><p>그 외의 MariaDB sql 문법을 위해서는 MariaDB basic sql statement 문서[3] 를
참고합시다.</p><h1 id=mycnf-configuration>my.cnf configuration<a hidden class=anchor aria-hidden=true href=#mycnf-configuration>#</a></h1><p>mysql 과 마찬가지로 MariaDB 역시 my.cnf 파일을 사용해[1] 대부분의 설정을
구성합니다. 기본적으로 /etc/my.cnf, /etc/mysql/my.cnf &mldr; 순으로 설정 파일을
찾게 되며, mysqld_safe 실행파일 실행 시에 &ndash;defaults-file 인자로 파일 경로를
줄수도 있습니다. 소스 코드 디렉토리의 support-files/ 디렉토리 아래에
my-huge.cnf, my-large.cnf, my-medium.cnf 등의 예제 설정도 있습니다.</p><p>앞의 과정을 따라서 설치하면 /etc/ 아래에 my.cnf 파일이 없을 겁니다. 이 때의
기본 설정은 어떻게 되는지는 다음 커맨드를 통해 알 수 있습니다.</p><pre tabindex=0><code>$ /usr/local/mysql/bin/mysql -NBe &#39;SHOW VARIABLES&#39;
</code></pre><p>askapache.com 에서는[5] 이를 이용해 기본 my.cnf 를 추출하는 커맨드도 소개하고
있으니 필요하면 참고하시기 바랍니다.</p><h1 id=data-directory-specification>Data Directory Specification<a hidden class=anchor aria-hidden=true href=#data-directory-specification>#</a></h1><p>실험용으로 MariaDB 를 사용하는 경우라면 MariaDB 데이터를 최초 상태로 백업해
두거나 서로 다른 설정의 데이터를 유지해야 할 수도 있습니다.</p><p>MariaDB 의 default data directory 는 /usr/local/mysql/data/ 로, 프롬프트에서</p><pre tabindex=0><code>&gt; select @@datadir;
</code></pre><p>명령으로 현재 띄워진 MariaDB 서버 프로세스가 사용중인 data directory 의 경로를
볼 수 있습니다. 이 경로는 my.cnf 상에서 수정할 수도 있고, mysqld_safe 실행 시
&ndash;datadir 옵션으로 지정할 수도 있습니다. 주의할 점은, 이때 &ndash;datadir 인자로
주는 데이터 디렉토리는 한번은 scripts/mysql_install_db 를 실행해준 디렉토리여야
한다는 것입니다. mysql_install_db 명령에도 &ndash;datadir 인자를 줄수 있습니다.</p><h1 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h1><p>MariaDB 최신 버전의 소스코드를 가져와 빌드하고 설치해서 사용하는 방법을
알아봤습니다. 하나의 예제로 정리해 보자면 다음과 같습니다.</p><pre tabindex=0><code>$ git clone https://github.com/MariaDB/server.git mariadb
$ cd mariadb
$ git checkout mariadb-10.2.8
$ cmake . -DBUILD_CONFIG=mysql_release
$ make
$ sudo make install
$ sudo adduser mysql
$ sudo chown -R mysql /usr/local/mysql/
$ cd /usr/local/mysql/
$ sudo -u mysql ./scripts/mysql_install_db --datadirr=&#39;./data&#39; &amp;
$ /usr/local/mysql/bin/mysql
</code></pre><h1 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h1><p>[1] <a href=https://mariadb.com/kb/en/mariadb/generic-build-instructions/>https://mariadb.com/kb/en/mariadb/generic-build-instructions/</a><br>[2] <a href=https://downloads.mariadb.org/mariadb/+releases/>https://downloads.mariadb.org/mariadb/+releases/</a><br>[3] <a href=https://mariadb.com/kb/en/mariadb/basic-sql-statements/>https://mariadb.com/kb/en/mariadb/basic-sql-statements/</a><br>[4] <a href=https://mariadb.com/kb/en/mariadb/configuring-mariadb-with-mycnf/>https://mariadb.com/kb/en/mariadb/configuring-mariadb-with-mycnf/</a><br>[5] <a href=https://www.askapache.com/mysql/view-mysql-variables-my-cnf/>https://www.askapache.com/mysql/view-mysql-variables-my-cnf/</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://sjp38.github.io/tags/db/>Db</a></li><li><a href=https://sjp38.github.io/tags/database/>Database</a></li><li><a href=https://sjp38.github.io/tags/dbms/>Dbms</a></li><li><a href=https://sjp38.github.io/tags/mariadb/>Mariadb</a></li></ul><nav class=paginav><a class=prev href=https://sjp38.github.io/posts/en/tpch-on-mariadb/><span class=title>« Prev</span><br><span>TPC-H on MariaDB (MySQL)</span>
</a><a class=next href=https://sjp38.github.io/posts/ko/mariadb_setup/><span class=title>Next »</span><br><span>Ubuntu 16.04 Server 위에 MariaDB 설치/사용하기</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Ubuntu 16.04 Server 위에 MariaDB 설치/사용하기 on x" href="https://x.com/intent/tweet/?text=Ubuntu%2016.04%20Server%20%ec%9c%84%ec%97%90%20MariaDB%20%ec%84%a4%ec%b9%98%2f%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0&amp;url=https%3a%2f%2fsjp38.github.io%2fposts%2fen%2fmariadb_setup%2f&amp;hashtags=db%2cdatabase%2cdbms%2cmariadb"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Ubuntu 16.04 Server 위에 MariaDB 설치/사용하기 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fsjp38.github.io%2fposts%2fen%2fmariadb_setup%2f&amp;title=Ubuntu%2016.04%20Server%20%ec%9c%84%ec%97%90%20MariaDB%20%ec%84%a4%ec%b9%98%2f%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0&amp;summary=Ubuntu%2016.04%20Server%20%ec%9c%84%ec%97%90%20MariaDB%20%ec%84%a4%ec%b9%98%2f%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0&amp;source=https%3a%2f%2fsjp38.github.io%2fposts%2fen%2fmariadb_setup%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Ubuntu 16.04 Server 위에 MariaDB 설치/사용하기 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fsjp38.github.io%2fposts%2fen%2fmariadb_setup%2f&title=Ubuntu%2016.04%20Server%20%ec%9c%84%ec%97%90%20MariaDB%20%ec%84%a4%ec%b9%98%2f%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Ubuntu 16.04 Server 위에 MariaDB 설치/사용하기 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fsjp38.github.io%2fposts%2fen%2fmariadb_setup%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Ubuntu 16.04 Server 위에 MariaDB 설치/사용하기 on whatsapp" href="https://api.whatsapp.com/send?text=Ubuntu%2016.04%20Server%20%ec%9c%84%ec%97%90%20MariaDB%20%ec%84%a4%ec%b9%98%2f%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0%20-%20https%3a%2f%2fsjp38.github.io%2fposts%2fen%2fmariadb_setup%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Ubuntu 16.04 Server 위에 MariaDB 설치/사용하기 on telegram" href="https://telegram.me/share/url?text=Ubuntu%2016.04%20Server%20%ec%9c%84%ec%97%90%20MariaDB%20%ec%84%a4%ec%b9%98%2f%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0&amp;url=https%3a%2f%2fsjp38.github.io%2fposts%2fen%2fmariadb_setup%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Ubuntu 16.04 Server 위에 MariaDB 설치/사용하기 on ycombinator" href="https://news.ycombinator.com/submitlink?t=Ubuntu%2016.04%20Server%20%ec%9c%84%ec%97%90%20MariaDB%20%ec%84%a4%ec%b9%98%2f%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0&u=https%3a%2f%2fsjp38.github.io%2fposts%2fen%2fmariadb_setup%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://sjp38.github.io/>hacklog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>