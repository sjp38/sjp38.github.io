<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>LKML News v5.12-rc1 | hacklog</title>
<meta name=keywords content="linux,kernel,lkml,news"><meta name=description content="[PATCH v11 00/14] prohibit pinning pages in ZONE_MOVABLE (Pavel Tatashin) https://lkml.kernel.org/r/20210215161349.246722-1-pasha.tatashin@soleen.com
The 11th version of the patchset making ZONE_MOVABLE really movable. In this version, a build error on i386 is fixed.
[RFC PATCH] mm, oom: introduce vm.sacrifice_hugepage_on_oom https://lkml.kernel.org/r/20210216030713.79101-1-eiichi.tsukata@nutanix.com
This RFC patch introduces yet another sysctl knob called vm.sacrifice_hugepage_on_oom. When it is turned on, it tries to free available hugepages before waking oom-killer up.
[RFC] Hugepage collapse in process context (David Rientjes) https://lkml."><meta name=author content="Me"><link rel=canonical href=https://sjp38.github.io/posts/en/lkml_news_v5.12-rc1/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://sjp38.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://sjp38.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://sjp38.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://sjp38.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://sjp38.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://sjp38.github.io/posts/en/lkml_news_v5.12-rc1/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="LKML News v5.12-rc1"><meta property="og:description" content="[PATCH v11 00/14] prohibit pinning pages in ZONE_MOVABLE (Pavel Tatashin) https://lkml.kernel.org/r/20210215161349.246722-1-pasha.tatashin@soleen.com
The 11th version of the patchset making ZONE_MOVABLE really movable. In this version, a build error on i386 is fixed.
[RFC PATCH] mm, oom: introduce vm.sacrifice_hugepage_on_oom https://lkml.kernel.org/r/20210216030713.79101-1-eiichi.tsukata@nutanix.com
This RFC patch introduces yet another sysctl knob called vm.sacrifice_hugepage_on_oom. When it is turned on, it tries to free available hugepages before waking oom-killer up.
[RFC] Hugepage collapse in process context (David Rientjes) https://lkml."><meta property="og:type" content="article"><meta property="og:url" content="https://sjp38.github.io/posts/en/lkml_news_v5.12-rc1/"><meta property="og:image" content="https://sjp38.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-02-16T07:17:38+01:00"><meta property="article:modified_time" content="2021-02-16T07:17:38+01:00"><meta property="og:site_name" content="hacklog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://sjp38.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="LKML News v5.12-rc1"><meta name=twitter:description content="[PATCH v11 00/14] prohibit pinning pages in ZONE_MOVABLE (Pavel Tatashin) https://lkml.kernel.org/r/20210215161349.246722-1-pasha.tatashin@soleen.com
The 11th version of the patchset making ZONE_MOVABLE really movable. In this version, a build error on i386 is fixed.
[RFC PATCH] mm, oom: introduce vm.sacrifice_hugepage_on_oom https://lkml.kernel.org/r/20210216030713.79101-1-eiichi.tsukata@nutanix.com
This RFC patch introduces yet another sysctl knob called vm.sacrifice_hugepage_on_oom. When it is turned on, it tries to free available hugepages before waking oom-killer up.
[RFC] Hugepage collapse in process context (David Rientjes) https://lkml."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://sjp38.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Posts","item":"https://sjp38.github.io/posts/en/"},{"@type":"ListItem","position":3,"name":"LKML News v5.12-rc1","item":"https://sjp38.github.io/posts/en/lkml_news_v5.12-rc1/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"LKML News v5.12-rc1","name":"LKML News v5.12-rc1","description":"[PATCH v11 00/14] prohibit pinning pages in ZONE_MOVABLE (Pavel Tatashin) https://lkml.kernel.org/r/20210215161349.246722-1-pasha.tatashin@soleen.com\nThe 11th version of the patchset making ZONE_MOVABLE really movable. In this version, a build error on i386 is fixed.\n[RFC PATCH] mm, oom: introduce vm.sacrifice_hugepage_on_oom https://lkml.kernel.org/r/20210216030713.79101-1-eiichi.tsukata@nutanix.com\nThis RFC patch introduces yet another sysctl knob called vm.sacrifice_hugepage_on_oom. When it is turned on, it tries to free available hugepages before waking oom-killer up.\n[RFC] Hugepage collapse in process context (David Rientjes) https://lkml.","keywords":["linux","kernel","lkml","news"],"articleBody":"[PATCH v11 00/14] prohibit pinning pages in ZONE_MOVABLE (Pavel Tatashin) https://lkml.kernel.org/r/20210215161349.246722-1-pasha.tatashin@soleen.com\nThe 11th version of the patchset making ZONE_MOVABLE really movable. In this version, a build error on i386 is fixed.\n[RFC PATCH] mm, oom: introduce vm.sacrifice_hugepage_on_oom https://lkml.kernel.org/r/20210216030713.79101-1-eiichi.tsukata@nutanix.com\nThis RFC patch introduces yet another sysctl knob called vm.sacrifice_hugepage_on_oom. When it is turned on, it tries to free available hugepages before waking oom-killer up.\n[RFC] Hugepage collapse in process context (David Rientjes) https://lkml.kernel.org/r/d098c392-273a-36a4-1a29-59731cdf5d3d@google.com\nWhen a THP request via madvise() is made, the system call only mark the memory region as a candidate of the promotion but does not do the promotion synchronously. The THP daemon, khugepaged, scans virtual address spaces and collapse regular pages of such regions to huge pages transparently. However, because the scanning works very slowly (at most 4096 pages every 10 seconds) to not consume CPU resource too much, it doesn’t show immediate effect to short-living workloads. My DAMOS-based efficient THP implementation also showed this problem before.\nIn this mail, David is proposing making a synchronous compaction can be requested from process context, via madvise_process() like system call.\n[PATCH RFC] mm/madvise: introduce MADV_POPULATE to prefault/prealloc memory (David Hildenbrand) https://lkml.kernel.org/r/20210217154844.12392-1-david@redhat.com\nDynamic populactions and discards of memory is required in user space when it needs to do sparse memory mappings management. Hypervisors are the good example. Though the discardings are available using MADV_DONTNEED and FALLOC_FL_PUNCH_HOLE, there is no appropriate way to do the pre-population. mmap() with MAP_POPULATE might be used, but it is not applicable for the dynamic remappings. This patch introduces MADV_POPULATE for the purpose.\n[PATCH] mm: vmstat: add cma statistics (Minchan Kim) https://lkml.kernel.org/r/20210217170025.512704-1-minchan@kernel.org\nThis patch adds CMA statistics in vmstat, so people can more easily understand how aggressively CMA is used and how much allocations fail.\nRe: 5.10 LTS Kernel: 2 or 6 years? (Grep Korah-Hartman) https://lkml.kernel.org/r/YC+AEcuXhPXXtmRB@kroah.com\nGreg told he wants to officially support v5.10.y for more than 2 years (maybe 6 years) if some company comes up and continuously use and support the versions. Hanjun Guo from Huawei came up and told Huawei will support it by using the kernel in their product, run tests continuously, and provide backporting of upstream fixes. Greg welcomes the reaction. So v5.10.y might be officially supported 6 years soon.\n[PATCH v6 1/1] mm/page_alloc.c: refactor initialization of struct page for holes in memory layout (Mike Rapoport) In case of real memory bank is not a multiple of SECTION_SIZE or the architecture does not register memory holes reserved by the firmware as memblock.memory, there could be struct pages that are not backed by real physical memory.\nThose had proper links to proper zone and node before, but after commit 73a6e474cb37, it doesn’t. This patch makes those to have proper links to zone and node again.\n[PATCH v3 0/2] Make alloc_contig_range handle Hugetlb pages (Oscar Salvador) https://lkml.kernel.org/r/20210222135137.25717-1-osalvador@suse.de\nThis is third version of the patchset making CMA to be usable for HugeTLB. Non-minor changes are mande from v2.\n[RFC PATCH v3 00/49] 1GB PUD THP support on x86_64 (Zi Yan) https://lkml.kernel.org/r/20210224223536.803765-1-zi.yan@sent.com\nThis RFC is for 1GB THP support on x86_64. Nevertheless, Zi Yan posted only the cover letter to discuss about his two concerns first. The first concern is how to allocate the 1GB memory. Current implementation uses CMA. This means someone could wrongly tune the kernel so that too large or too small CMA area could be configured. Second concern is the large amount of code. He tried to make the code as small as possible for convenient review, but failed and looking for a better way.\nincoming (Andrew Morton) https://lkml.kernel.org/r/20210225171452.713967e96554bb6a53e44a19@linux-foundation.org\nThe (maybe last) mm pull request for v5.12. This includes the kfence patchset and it merged in the mainline.\nLinux 5.12-rc1 (Linus Torvalds) https://lkml.kernel.org/r/CAHk-=wjUzNbTuRCAv80vyD1dXEEaefdpRi23J+suSaognBoV8A@mail.gmail.com\nAfter the two weeks of merge window, the first release candidate of v5.12 Linux kernel is released. Torvalds note that this release is partly small and he suspects this is partly due to the electricity problem in Portland area. As a result, he even considered extending the merge window, but he didn’t at the end of the day. Instead, he is now saying he could be more flexible about late pull requests, though he still asks the maintainers to explain what was the problem.\nBelow is the diffstat of the releases in the last two years.\nNote that the y-axis is in logarithm. I draw it using https://github.com/sjp38/relstat and https://github.com/sjp38/lazybox using below command:\n$ relstat.py --since 2019-03-01 | ~/lazybox/gnuplot/plot.py \\ --data_fmt table --type labeled-lines --xtics_rotate -90 \\ --font \"Times New Roman, 5pt\" --ylog --pointsize 0.3 And, below is the diffstat of the -rc1 releases in the last two years.\n","wordCount":"760","inLanguage":"en","image":"https://sjp38.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2021-02-16T07:17:38+01:00","dateModified":"2021-02-16T07:17:38+01:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://sjp38.github.io/posts/en/lkml_news_v5.12-rc1/"},"publisher":{"@type":"Organization","name":"hacklog","logo":{"@type":"ImageObject","url":"https://sjp38.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://sjp38.github.io/ accesskey=h title="hacklog (Alt + H)"><img src=https://sjp38.github.io/apple-touch-icon.png alt aria-label=logo height=35>hacklog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://sjp38.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://sjp38.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://sjp38.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://sjp38.github.io/files/resume_sjpark.pdf title=cv><span>cv</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://sjp38.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://sjp38.github.io/posts/>Posts</a>&nbsp;»&nbsp;<a href=https://sjp38.github.io/posts/en/>Posts</a></div><h1 class="post-title entry-hint-parent">LKML News v5.12-rc1</h1><div class=post-meta><span title='2021-02-16 07:17:38 +0100 +0100'>February 16, 2021</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;760 words&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/en/lkml_news_v5.12-rc1.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#patch-v11-0014-prohibit-pinning-pages-in-zone_movable-pavel-tatashin>[PATCH v11 00/14] prohibit pinning pages in ZONE_MOVABLE (Pavel Tatashin)</a></li><li><a href=#rfc-patch-mm-oom-introduce-vmsacrifice_hugepage_on_oom>[RFC PATCH] mm, oom: introduce vm.sacrifice_hugepage_on_oom</a></li><li><a href=#rfc-hugepage-collapse-in-process-context-david-rientjes>[RFC] Hugepage collapse in process context (David Rientjes)</a></li><li><a href=#patch-rfc-mmmadvise-introduce-madv_populate-to-prefaultprealloc-memory-david-hildenbrand>[PATCH RFC] mm/madvise: introduce MADV_POPULATE to prefault/prealloc memory (David Hildenbrand)</a></li><li><a href=#patch-mm-vmstat-add-cma-statistics-minchan-kim>[PATCH] mm: vmstat: add cma statistics (Minchan Kim)</a></li><li><a href=#re-510-lts-kernel-2-or-6-years-grep-korah-hartman>Re: 5.10 LTS Kernel: 2 or 6 years? (Grep Korah-Hartman)</a></li><li><a href=#patch-v6-11-mmpage_allocc-refactor-initialization-of-struct-page-for-holes-in-memory-layout-mike-rapoport>[PATCH v6 1/1] mm/page_alloc.c: refactor initialization of struct page for holes in memory layout (Mike Rapoport)</a></li><li><a href=#patch-v3-02-make-alloc_contig_range-handle-hugetlb-pages-oscar-salvador>[PATCH v3 0/2] Make alloc_contig_range handle Hugetlb pages (Oscar Salvador)</a></li><li><a href=#rfc-patch-v3-0049-1gb-pud-thp-support-on-x86_64-zi-yan>[RFC PATCH v3 00/49] 1GB PUD THP support on x86_64 (Zi Yan)</a></li><li><a href=#incoming-andrew-morton>incoming (Andrew Morton)</a></li><li><a href=#linux-512-rc1-linus-torvalds>Linux 5.12-rc1 (Linus Torvalds)</a></li></ul></nav></div></details></div><div class=post-content><h2 id=patch-v11-0014-prohibit-pinning-pages-in-zone_movable-pavel-tatashin>[PATCH v11 00/14] prohibit pinning pages in ZONE_MOVABLE (Pavel Tatashin)<a hidden class=anchor aria-hidden=true href=#patch-v11-0014-prohibit-pinning-pages-in-zone_movable-pavel-tatashin>#</a></h2><p><a href=https://lkml.kernel.org/r/20210215161349.246722-1-pasha.tatashin@soleen.com>https://lkml.kernel.org/r/20210215161349.246722-1-pasha.tatashin@soleen.com</a></p><p>The 11th version of the patchset making <code>ZONE_MOVABLE</code> really movable. In this
version, a build error on i386 is fixed.</p><h2 id=rfc-patch-mm-oom-introduce-vmsacrifice_hugepage_on_oom>[RFC PATCH] mm, oom: introduce vm.sacrifice_hugepage_on_oom<a hidden class=anchor aria-hidden=true href=#rfc-patch-mm-oom-introduce-vmsacrifice_hugepage_on_oom>#</a></h2><p><a href=https://lkml.kernel.org/r/20210216030713.79101-1-eiichi.tsukata@nutanix.com>https://lkml.kernel.org/r/20210216030713.79101-1-eiichi.tsukata@nutanix.com</a></p><p>This RFC patch introduces yet another sysctl knob called
<code>vm.sacrifice_hugepage_on_oom</code>. When it is turned on, it tries to free
available hugepages before waking oom-killer up.</p><h2 id=rfc-hugepage-collapse-in-process-context-david-rientjes>[RFC] Hugepage collapse in process context (David Rientjes)<a hidden class=anchor aria-hidden=true href=#rfc-hugepage-collapse-in-process-context-david-rientjes>#</a></h2><p><a href=https://lkml.kernel.org/r/d098c392-273a-36a4-1a29-59731cdf5d3d@google.com>https://lkml.kernel.org/r/d098c392-273a-36a4-1a29-59731cdf5d3d@google.com</a></p><p>When a THP request via <code>madvise()</code> is made, the system call only mark the
memory region as a candidate of the promotion but does not do the promotion
synchronously. The THP daemon, khugepaged, scans virtual address spaces and
collapse regular pages of such regions to huge pages transparently. However,
because the scanning works very slowly (at most 4096 pages every 10 seconds) to
not consume CPU resource too much, it doesn&rsquo;t show immediate effect to
short-living workloads. My DAMOS-based efficient THP implementation also
showed this problem before.</p><p>In this mail, David is proposing making a synchronous compaction can be
requested from process context, via <code>madvise_process()</code> like system call.</p><h2 id=patch-rfc-mmmadvise-introduce-madv_populate-to-prefaultprealloc-memory-david-hildenbrand>[PATCH RFC] mm/madvise: introduce MADV_POPULATE to prefault/prealloc memory (David Hildenbrand)<a hidden class=anchor aria-hidden=true href=#patch-rfc-mmmadvise-introduce-madv_populate-to-prefaultprealloc-memory-david-hildenbrand>#</a></h2><p><a href=https://lkml.kernel.org/r/20210217154844.12392-1-david@redhat.com>https://lkml.kernel.org/r/20210217154844.12392-1-david@redhat.com</a></p><p>Dynamic populactions and discards of memory is required in user space when it
needs to do sparse memory mappings management. Hypervisors are the good
example. Though the discardings are available using <code>MADV_DONTNEED</code> and
<code>FALLOC_FL_PUNCH_HOLE</code>, there is no appropriate way to do the pre-population.
<code>mmap()</code> with <code>MAP_POPULATE</code> might be used, but it is not applicable for the
dynamic remappings. This patch introduces <code>MADV_POPULATE</code> for the purpose.</p><h2 id=patch-mm-vmstat-add-cma-statistics-minchan-kim>[PATCH] mm: vmstat: add cma statistics (Minchan Kim)<a hidden class=anchor aria-hidden=true href=#patch-mm-vmstat-add-cma-statistics-minchan-kim>#</a></h2><p><a href=https://lkml.kernel.org/r/20210217170025.512704-1-minchan@kernel.org>https://lkml.kernel.org/r/20210217170025.512704-1-minchan@kernel.org</a></p><p>This patch adds CMA statistics in vmstat, so people can more easily understand
how aggressively CMA is used and how much allocations fail.</p><h2 id=re-510-lts-kernel-2-or-6-years-grep-korah-hartman>Re: 5.10 LTS Kernel: 2 or 6 years? (Grep Korah-Hartman)<a hidden class=anchor aria-hidden=true href=#re-510-lts-kernel-2-or-6-years-grep-korah-hartman>#</a></h2><p><a href=https://lkml.kernel.org/r/YC+AEcuXhPXXtmRB@kroah.com>https://lkml.kernel.org/r/YC+AEcuXhPXXtmRB@kroah.com</a></p><p>Greg told he wants to officially support v5.10.y for more than 2 years (maybe 6
years) if some company comes up and continuously use and support the versions.
Hanjun Guo from Huawei came up and told Huawei will support it by using the
kernel in their product, run tests continuously, and provide backporting of
upstream fixes. Greg welcomes the reaction. So v5.10.y might be officially
supported 6 years soon.</p><h2 id=patch-v6-11-mmpage_allocc-refactor-initialization-of-struct-page-for-holes-in-memory-layout-mike-rapoport>[PATCH v6 1/1] mm/page_alloc.c: refactor initialization of struct page for holes in memory layout (Mike Rapoport)<a hidden class=anchor aria-hidden=true href=#patch-v6-11-mmpage_allocc-refactor-initialization-of-struct-page-for-holes-in-memory-layout-mike-rapoport>#</a></h2><p>In case of real memory bank is not a multiple of <code>SECTION_SIZE</code> or the
architecture does not register memory holes reserved by the firmware as
<code>memblock.memory</code>, there could be <code>struct page</code>s that are not backed by real
physical memory.</p><p>Those had proper links to proper zone and node before, but after commit
73a6e474cb37, it doesn&rsquo;t. This patch makes those to have proper links to zone
and node again.</p><h2 id=patch-v3-02-make-alloc_contig_range-handle-hugetlb-pages-oscar-salvador>[PATCH v3 0/2] Make alloc_contig_range handle Hugetlb pages (Oscar Salvador)<a hidden class=anchor aria-hidden=true href=#patch-v3-02-make-alloc_contig_range-handle-hugetlb-pages-oscar-salvador>#</a></h2><p><a href=https://lkml.kernel.org/r/20210222135137.25717-1-osalvador@suse.de>https://lkml.kernel.org/r/20210222135137.25717-1-osalvador@suse.de</a></p><p>This is third version of the patchset making CMA to be usable for HugeTLB.
Non-minor changes are mande from v2.</p><h2 id=rfc-patch-v3-0049-1gb-pud-thp-support-on-x86_64-zi-yan>[RFC PATCH v3 00/49] 1GB PUD THP support on x86_64 (Zi Yan)<a hidden class=anchor aria-hidden=true href=#rfc-patch-v3-0049-1gb-pud-thp-support-on-x86_64-zi-yan>#</a></h2><p><a href=https://lkml.kernel.org/r/20210224223536.803765-1-zi.yan@sent.com>https://lkml.kernel.org/r/20210224223536.803765-1-zi.yan@sent.com</a></p><p>This RFC is for 1GB THP support on <code>x86_64</code>. Nevertheless, Zi Yan posted only
the cover letter to discuss about his two concerns first. The first concern is
how to allocate the 1GB memory. Current implementation uses CMA. This means
someone could wrongly tune the kernel so that too large or too small CMA area
could be configured. Second concern is the large amount of code. He tried to
make the code as small as possible for convenient review, but failed and
looking for a better way.</p><h2 id=incoming-andrew-morton>incoming (Andrew Morton)<a hidden class=anchor aria-hidden=true href=#incoming-andrew-morton>#</a></h2><p><a href=https://lkml.kernel.org/r/20210225171452.713967e96554bb6a53e44a19@linux-foundation.org>https://lkml.kernel.org/r/20210225171452.713967e96554bb6a53e44a19@linux-foundation.org</a></p><p>The (maybe last) <code>mm</code> pull request for v5.12. This includes the kfence
patchset and it merged in the mainline.</p><h2 id=linux-512-rc1-linus-torvalds>Linux 5.12-rc1 (Linus Torvalds)<a hidden class=anchor aria-hidden=true href=#linux-512-rc1-linus-torvalds>#</a></h2><p><a href="https://lkml.kernel.org/r/CAHk-=wjUzNbTuRCAv80vyD1dXEEaefdpRi23J+suSaognBoV8A@mail.gmail.com">https://lkml.kernel.org/r/CAHk-=wjUzNbTuRCAv80vyD1dXEEaefdpRi23J+suSaognBoV8A@mail.gmail.com</a></p><p>After the two weeks of merge window, the first release candidate of v5.12 Linux
kernel is released. Torvalds note that this release is partly small and he
suspects this is partly due to the electricity problem in Portland area. As a
result, he even considered extending the merge window, but he didn&rsquo;t at the end
of the day. Instead, he is now saying he could be more flexible about late
pull requests, though he still asks the maintainers to explain what was the
problem.</p><p>Below is the diffstat of the releases in the last two years.</p><p><img loading=lazy src=/img/kernel_release_stat/v5.1-rc1..v5.12-rc1.png alt="Kernel release stat"></p><p>Note that the y-axis is in logarithm. I draw it using
<a href=https://github.com/sjp38/relstat>https://github.com/sjp38/relstat</a> and <a href=https://github.com/sjp38/lazybox>https://github.com/sjp38/lazybox</a> using
below command:</p><pre><code>$ relstat.py --since 2019-03-01 | ~/lazybox/gnuplot/plot.py \
    --data_fmt table --type labeled-lines --xtics_rotate -90 \
    --font &quot;Times New Roman, 5pt&quot; --ylog --pointsize 0.3
</code></pre><p>And, below is the diffstat of the -rc1 releases in the last two years.</p><p><img loading=lazy src=/img/kernel_release_stat/v5.12-rc1-only.png alt="rc2 release stat"></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://sjp38.github.io/tags/linux/>Linux</a></li><li><a href=https://sjp38.github.io/tags/kernel/>Kernel</a></li><li><a href=https://sjp38.github.io/tags/lkml/>Lkml</a></li><li><a href=https://sjp38.github.io/tags/news/>News</a></li></ul><nav class=paginav><a class=prev href=https://sjp38.github.io/posts/ko/damon_profile_callstack_example/><span class=title>« Prev</span><br><span>DAMON 을 이용한 프로파일링의 한 예</span>
</a><a class=next href=https://sjp38.github.io/posts/en/lkml_news_v5.11/><span class=title>Next »</span><br><span>LKML News v5.11</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share LKML News v5.12-rc1 on x" href="https://x.com/intent/tweet/?text=LKML%20News%20v5.12-rc1&amp;url=https%3a%2f%2fsjp38.github.io%2fposts%2fen%2flkml_news_v5.12-rc1%2f&amp;hashtags=linux%2ckernel%2clkml%2cnews"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share LKML News v5.12-rc1 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fsjp38.github.io%2fposts%2fen%2flkml_news_v5.12-rc1%2f&amp;title=LKML%20News%20v5.12-rc1&amp;summary=LKML%20News%20v5.12-rc1&amp;source=https%3a%2f%2fsjp38.github.io%2fposts%2fen%2flkml_news_v5.12-rc1%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share LKML News v5.12-rc1 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fsjp38.github.io%2fposts%2fen%2flkml_news_v5.12-rc1%2f&title=LKML%20News%20v5.12-rc1"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share LKML News v5.12-rc1 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fsjp38.github.io%2fposts%2fen%2flkml_news_v5.12-rc1%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share LKML News v5.12-rc1 on whatsapp" href="https://api.whatsapp.com/send?text=LKML%20News%20v5.12-rc1%20-%20https%3a%2f%2fsjp38.github.io%2fposts%2fen%2flkml_news_v5.12-rc1%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share LKML News v5.12-rc1 on telegram" href="https://telegram.me/share/url?text=LKML%20News%20v5.12-rc1&amp;url=https%3a%2f%2fsjp38.github.io%2fposts%2fen%2flkml_news_v5.12-rc1%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share LKML News v5.12-rc1 on ycombinator" href="https://news.ycombinator.com/submitlink?t=LKML%20News%20v5.12-rc1&u=https%3a%2f%2fsjp38.github.io%2fposts%2fen%2flkml_news_v5.12-rc1%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://sjp38.github.io/>hacklog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>