<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Linux Kernel Performance (LKP) Tests | hacklog</title>
<meta name=keywords content="linux,test,evaluation,benchmark"><meta name=description content="리눅스 커널의 개발은 커뮤니티 주도입니다. 개발의 한 부분인 테스트 역시 커뮤니티 주도적입니다. 여러 개인 또는 단체가 커널을 각자의 방식으로 테스트 하고 그 결과를 공유합니다. 인텔에서는 0-day 서비스[1] 라는 서비스를 자체적으로 돌리는데, 이 서비스는 최신 리눅스 커널을 가져다가 빌드하고 다양한 기능 / 성능 테스트를 돌리고 그 결과 발견된 regression 을 LKML 에 메일로 보내주는 일을 합니다. 말하자면 Continuous Integration (CI) 이죠.
Linux Kernel Performance (LKP) Tests[2] 는 0-day 서비스에서 기능 / 성능 테스트를 수행하는데 사용되는 도구입니다."><meta name=author content="Me"><link rel=canonical href=https://sjp38.github.io/posts/ko/lkp-tests/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://sjp38.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://sjp38.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://sjp38.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://sjp38.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://sjp38.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://sjp38.github.io/posts/ko/lkp-tests/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Linux Kernel Performance (LKP) Tests"><meta property="og:description" content="리눅스 커널의 개발은 커뮤니티 주도입니다. 개발의 한 부분인 테스트 역시 커뮤니티 주도적입니다. 여러 개인 또는 단체가 커널을 각자의 방식으로 테스트 하고 그 결과를 공유합니다. 인텔에서는 0-day 서비스[1] 라는 서비스를 자체적으로 돌리는데, 이 서비스는 최신 리눅스 커널을 가져다가 빌드하고 다양한 기능 / 성능 테스트를 돌리고 그 결과 발견된 regression 을 LKML 에 메일로 보내주는 일을 합니다. 말하자면 Continuous Integration (CI) 이죠.
Linux Kernel Performance (LKP) Tests[2] 는 0-day 서비스에서 기능 / 성능 테스트를 수행하는데 사용되는 도구입니다."><meta property="og:type" content="article"><meta property="og:url" content="https://sjp38.github.io/posts/ko/lkp-tests/"><meta property="og:image" content="https://sjp38.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-08-02T17:20:10+09:00"><meta property="article:modified_time" content="2018-08-02T17:20:10+09:00"><meta property="og:site_name" content="hacklog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://sjp38.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Linux Kernel Performance (LKP) Tests"><meta name=twitter:description content="리눅스 커널의 개발은 커뮤니티 주도입니다. 개발의 한 부분인 테스트 역시 커뮤니티 주도적입니다. 여러 개인 또는 단체가 커널을 각자의 방식으로 테스트 하고 그 결과를 공유합니다. 인텔에서는 0-day 서비스[1] 라는 서비스를 자체적으로 돌리는데, 이 서비스는 최신 리눅스 커널을 가져다가 빌드하고 다양한 기능 / 성능 테스트를 돌리고 그 결과 발견된 regression 을 LKML 에 메일로 보내주는 일을 합니다. 말하자면 Continuous Integration (CI) 이죠.
Linux Kernel Performance (LKP) Tests[2] 는 0-day 서비스에서 기능 / 성능 테스트를 수행하는데 사용되는 도구입니다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://sjp38.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Posts","item":"https://sjp38.github.io/posts/ko/"},{"@type":"ListItem","position":3,"name":"Linux Kernel Performance (LKP) Tests","item":"https://sjp38.github.io/posts/ko/lkp-tests/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Linux Kernel Performance (LKP) Tests","name":"Linux Kernel Performance (LKP) Tests","description":"리눅스 커널의 개발은 커뮤니티 주도입니다. 개발의 한 부분인 테스트 역시 커뮤니티 주도적입니다. 여러 개인 또는 단체가 커널을 각자의 방식으로 테스트 하고 그 결과를 공유합니다. 인텔에서는 0-day 서비스[1] 라는 서비스를 자체적으로 돌리는데, 이 서비스는 최신 리눅스 커널을 가져다가 빌드하고 다양한 기능 / 성능 테스트를 돌리고 그 결과 발견된 regression 을 LKML 에 메일로 보내주는 일을 합니다. 말하자면 Continuous Integration (CI) 이죠.\nLinux Kernel Performance (LKP) Tests[2] 는 0-day 서비스에서 기능 / 성능 테스트를 수행하는데 사용되는 도구입니다.","keywords":["linux","test","evaluation","benchmark"],"articleBody":"리눅스 커널의 개발은 커뮤니티 주도입니다. 개발의 한 부분인 테스트 역시 커뮤니티 주도적입니다. 여러 개인 또는 단체가 커널을 각자의 방식으로 테스트 하고 그 결과를 공유합니다. 인텔에서는 0-day 서비스[1] 라는 서비스를 자체적으로 돌리는데, 이 서비스는 최신 리눅스 커널을 가져다가 빌드하고 다양한 기능 / 성능 테스트를 돌리고 그 결과 발견된 regression 을 LKML 에 메일로 보내주는 일을 합니다. 말하자면 Continuous Integration (CI) 이죠.\nLinux Kernel Performance (LKP) Tests[2] 는 0-day 서비스에서 기능 / 성능 테스트를 수행하는데 사용되는 도구입니다. 다양한 테스트를 돌리기 위한 시스템 환경 구성, 테스트 프로그램과 그 종속 프로그램 / 라이브러리의 설치와 환경 구성, 테스트 수행과 결과 정리, 그리고 테스트 진행 사이의 시스템 상태 프로파일링 및 프로파일링 결과 정리를 대신해 줍니다. 0-day 서비스에 연결되어 있지만 lkp-tests 와 0-day 서비스 사이의 종속성이 없으며, 오픈소스 프로젝트로 개발이 진행되고 있어 그 소스코드를 누구나 사용할 수 있으며 개인이 사용하기에도 편리하게 되어 있어서 개인 개발자가 자신의 패치를 테스트할 목적으로 사용하기에도 좋습니다. 이 글에서는 이러한 lkp-tests 의 구조와 사용법을 간단히 설명합니다. 전체적으로 인텔의 관련 블로그 글[3] 을 참고했습니다.\n설치 먼저 다음 커맨드로 lkp-tests 소스코드를 얻어옵니다:\n$ git clone https://github.com/intel/lkp-tests $ cd lkp-tests 그리고 lkp-tests 자체를 설치.\n$ sudo make install 이 커맨드는 단순히 지금 소스코드를 땡겨온 lkp-tests 소스코드 디렉토리의 bin/lkp 파일을 링크하는 /usr/local/bin/lkp 심볼릭 링크를 만들 뿐입니다. 따라서 셸에서 lkp 커맨드를 쓸 수 있게 해주죠. 이 lkp 파일이 결국 lkp-tests 의 대부분의 일을 해주는 핵심 커맨드입니다. 이 프로그램의 간단한 사용법은 다음과 같이 확인할 수 있습니다:\n$ lkp Usage: lkp [options] INSTALLATION install JOB install binary dependencies for JOB JOB split JOB split JOB matrix compile JOB compile JOB into shell script TESTING run JOB run test JOB locally qemu JOB run test JOB in QEMU virtual machine RESULT result|rt|_rt|__rt PATTERNs show result dirs ls|ll PATTERNs ls result dirs rm-path result remove result dirs _rm PATTERNs remove _result dirs stat [options] show result stats compare [options] compare result stats DEBUG irb run irb with lib/*.rb loaded pry run pry with lib/*.rb loaded More commands can be found in /home/sjpark/lkp-tests/{bin,sbin,tools}/ 여기서 는 lkp-tests 소스코드 디렉토리 아래 bin/, sbin/, tools/, 또는 lkp-exec/ 아래 위치한 실행파일로, lkp 는 단순히 그 실행파일을 수행하면서 인자를 넘길 뿐입니다.\n테스트에 필요한 소프트웨어 설치 다음 커맨드는 lkp-tests 가 의존하고 있는 기본적 소프트웨어 패키지들을 모두 설치합니다:\n$ sudo lkp install Ubuntu 16.04 에서는 다음 패키지들을 까는군요:\nbc gawk gzip kmod time automake bison bsdtar build-essential bzip2 ca-certificates cpio fakeroot flex gcc git libc6-dev libc6-dev:i386 libklibc-dev libtool linux-libc-dev linux-libc-dev:i386 linux-tools-generic make openssl patch rsync ruby ruby-dev wget lkp-tests 내부 벤치마크 실행 이제 lkp-tests 에서 지원하는 벤치마크를 실제로 돌려봅시다.\n테스트 수행에 필요한 환경 설정 실제 테스트를 돌리기 위해선 벤치마크를 깔고, 그 벤치마크가 사용하는 패키지를 깔고, 테스트에 사용될 도구들을 깔고, 여러 설정을 하는등의 작업이 필요합니다.\n다음 명령은 lkp-tests 에서 ebizzy 라는 벤치마크를 사용하는 테스트를 위해 필요한 프로그램들을 설치하고 수행 환경을 준비합니다.\n$ sudo lkp install jobs/ebizzy.yaml job lkp-tests 에서 테스트 수행의 기본 단위는 job 이라고 이야기 하는데, jobs/ 디렉토리 아래에 각 job 을 설명한 yaml 파일이 있습니다. 위의 커맨드에서 인자로 넣은 ebizzy.yaml 은 ebizzy 를 사용한 테스트에 필요한 사항들이 들어있습니다. 이 커맨드는 내부적으로 이 테스트에 필요한 패키지를 설치하고 ebizzy 벤치마크도 소스코드를 인터넷에서 받아다가 컴파일해 설치합니다.\nJob 파일은 또한 해당 테스트가 어떤 시스템 환경들에서 어떤 벤치마크를 어떤 인자를 줘가며 수행해야할지 등에 대한 내용을 담고 있습니다. 예컨대 jobs/aim7-fs-1brd.yaml job 은 xfs, ext4, btrfs, f2fs 파일 시스템 각각에 대해 aim7 을 돌려보도록 되어 있습니다.\n테스트 수행 다음 명령은 ebizzy job 으로 기술된 테스트를 실제 수행시킵니다:\n$ sudo lkp run jobs/ebizzy.yaml job 쪼개기 ebizzy.yaml 은 시스템 소유 CPU 코어 갯수 2배 갯수의 쓰레드를 사용해 ebizzy 를 10초간 돌리는 실험을 100번 반복하도록 되어 있습니다. 즉, 실험의 경우의 수가 하나입니다. 그러나, 앞서 설명한 aim7-fs-1brd 와 같이 다양한 구성을 사용하게 되어 있는 경우, 한가지 구성에 대해서만 반복 실험을 하고 싶을 수 있을 겁니다. 이런 경우 다음 명령으로 job 을 쪼갤 수 있습니다:\n$ sudo lkp split jobs/ebizzy.yaml 이 커맨드는 인자로 넣은 job 파일을 쪼개서 현재 디렉토리에 쪼개진 job 파일들을 저장합니다. 어떤 구성이 쪼개졌는지는 파일 이름으로 볼 수 있습니다. ebizzy.yaml 을 쪼개면 ebizzy-200%-100x-10s.yaml 라는 이름의 한개의 job 파일이 생성됩니다. 앞서 이야기한 aim7-fs-1brd.yaml 을 쪼개면 다음과 같이 많은 수의 job 이 생성됩니다:\naim7-fs-1brd-1BRD_48G-btrfs-creat-clo-4.yaml aim7-fs-1brd-1BRD_48G-f2fs-creat-clo-1500.yaml aim7-fs-1brd-1BRD_48G-btrfs-disk_cp-1500.yaml aim7-fs-1brd-1BRD_48G-f2fs-disk_cp-3000.yaml aim7-fs-1brd-1BRD_48G-btrfs-disk_rd-9000.yaml aim7-fs-1brd-1BRD_48G-f2fs-disk_rd-9000.yaml aim7-fs-1brd-1BRD_48G-btrfs-disk_rr-1500.yaml aim7-fs-1brd-1BRD_48G-f2fs-disk_rr-3000.yaml aim7-fs-1brd-1BRD_48G-btrfs-disk_rw-1500.yaml aim7-fs-1brd-1BRD_48G-f2fs-disk_rw-3000.yaml aim7-fs-1brd-1BRD_48G-btrfs-disk_src-500.yaml aim7-fs-1brd-1BRD_48G-f2fs-disk_src-3000.yaml aim7-fs-1brd-1BRD_48G-btrfs-disk_wrt-1500.yaml aim7-fs-1brd-1BRD_48G-f2fs-disk_wrt-3000.yaml aim7-fs-1brd-1BRD_48G-btrfs-sync_disk_rw-10.yaml aim7-fs-1brd-1BRD_48G-f2fs-sync_disk_rw-600.yaml aim7-fs-1brd-1BRD_48G-ext4-creat-clo-1000.yaml aim7-fs-1brd-1BRD_48G-xfs-creat-clo-1500.yaml aim7-fs-1brd-1BRD_48G-ext4-disk_cp-3000.yaml aim7-fs-1brd-1BRD_48G-xfs-disk_cp-3000.yaml aim7-fs-1brd-1BRD_48G-ext4-disk_rd-9000.yaml aim7-fs-1brd-1BRD_48G-xfs-disk_rd-9000.yaml aim7-fs-1brd-1BRD_48G-ext4-disk_rr-3000.yaml aim7-fs-1brd-1BRD_48G-xfs-disk_rr-3000.yaml aim7-fs-1brd-1BRD_48G-ext4-disk_rw-3000.yaml aim7-fs-1brd-1BRD_48G-xfs-disk_rw-3000.yaml aim7-fs-1brd-1BRD_48G-ext4-disk_src-3000.yaml aim7-fs-1brd-1BRD_48G-xfs-disk_src-3000.yaml aim7-fs-1brd-1BRD_48G-ext4-disk_wrt-3000.yaml aim7-fs-1brd-1BRD_48G-xfs-disk_wrt-3000.yaml aim7-fs-1brd-1BRD_48G-ext4-sync_disk_rw-600.yaml aim7-fs-1brd-1BRD_48G-xfs-sync_disk_rw-600.yaml 테스트 결과 확인 테스트에 사용된 벤치마크 수행의 결과와 테스트 동안의 시스템 프로파일링 결과는 /lkp/result/ 디렉토리 밑에 /////// 의 계층 구조로 저장됩니다. 또한, 이 실험 결과를 parsing 할 수 있는 경우엔 .json 파일을 만들어 줘서 parsing 된 결과 값도 보여줍니다.\n또한, 최근의 테스트 결과는 테스트 돌린 디렉토리에 result/ 라는 이름의, /lkp/result/ 아래 해당 디렉토리로의 심볼릭 링크를 만들어 줍니다.\nConclusion 이렇게 lkp-tests 가 무엇인지, 그리고 어떻게 사용할 수 있는지 알아봤습니다. 이제, 리눅스 커널 개발 커뮤니티에서 사용하는 리그레션 테스트를 여러분의 환경에서도 손쉽게 돌려볼 수 있습니다.\nReferences [1] https://01.org/lkp/documentation/0-day-test-service\n[2] https://github.com/intel/lkp-tests\n[3] https://01.org/blogs/jdu1/2017/lkp-tests-linux-kernel-performance-test-and-analysis-tool\n[4] https://wiki.archlinux.org/index.php/makepkg\n","wordCount":"795","inLanguage":"en","image":"https://sjp38.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2018-08-02T17:20:10+09:00","dateModified":"2018-08-02T17:20:10+09:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://sjp38.github.io/posts/ko/lkp-tests/"},"publisher":{"@type":"Organization","name":"hacklog","logo":{"@type":"ImageObject","url":"https://sjp38.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://sjp38.github.io/ accesskey=h title="hacklog (Alt + H)"><img src=https://sjp38.github.io/apple-touch-icon.png alt aria-label=logo height=35>hacklog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://sjp38.github.io/posts/en/ title=posts><span>posts</span></a></li><li><a href=https://sjp38.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://sjp38.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://sjp38.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://sjp38.github.io/files/resume_sjpark.pdf title=cv><span>cv</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://sjp38.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://sjp38.github.io/posts/>Posts</a>&nbsp;»&nbsp;<a href=https://sjp38.github.io/posts/ko/>Posts</a></div><h1 class="post-title entry-hint-parent">Linux Kernel Performance (LKP) Tests</h1><div class=post-meta><span title='2018-08-02 17:20:10 +0900 +0900'>August 2, 2018</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;795 words&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/sjp38/sjp38.github.io/tree/master/src/content/posts/ko/lkp-tests.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#테스트-수행에-필요한-환경-설정>테스트 수행에 필요한 환경 설정</a></li><li><a href=#job>job</a></li><li><a href=#테스트-수행>테스트 수행</a></li><li><a href=#job-쪼개기>job 쪼개기</a></li></ul><ul><li><a href=#references>References</a></li></ul></nav></div></details></div><div class=post-content><p>리눅스 커널의 개발은 커뮤니티 주도입니다. 개발의 한 부분인 테스트 역시
커뮤니티 주도적입니다. 여러 개인 또는 단체가 커널을 각자의 방식으로 테스트
하고 그 결과를 공유합니다. 인텔에서는 0-day 서비스[1] 라는 서비스를 자체적으로
돌리는데, 이 서비스는 최신 리눅스 커널을 가져다가 빌드하고 다양한 기능 / 성능
테스트를 돌리고 그 결과 발견된 regression 을 LKML 에 메일로 보내주는 일을
합니다. 말하자면 Continuous Integration (CI) 이죠.</p><p>Linux Kernel Performance (LKP) Tests[2] 는 0-day 서비스에서 기능 / 성능 테스트를
수행하는데 사용되는 도구입니다. 다양한 테스트를 돌리기 위한 시스템 환경 구성,
테스트 프로그램과 그 종속 프로그램 / 라이브러리의 설치와 환경 구성, 테스트
수행과 결과 정리, 그리고 테스트 진행 사이의 시스템 상태 프로파일링 및
프로파일링 결과 정리를 대신해 줍니다. 0-day 서비스에 연결되어 있지만 lkp-tests
와 0-day 서비스 사이의 종속성이 없으며, 오픈소스 프로젝트로 개발이 진행되고
있어 그 소스코드를 누구나 사용할 수 있으며 개인이 사용하기에도 편리하게 되어
있어서 개인 개발자가 자신의 패치를 테스트할 목적으로 사용하기에도 좋습니다. 이
글에서는 이러한 lkp-tests 의 구조와 사용법을 간단히 설명합니다. 전체적으로
인텔의 관련 블로그 글[3] 을 참고했습니다.</p><h1 id=설치>설치<a hidden class=anchor aria-hidden=true href=#설치>#</a></h1><p>먼저 다음 커맨드로 lkp-tests 소스코드를 얻어옵니다:</p><pre tabindex=0><code>$ git clone https://github.com/intel/lkp-tests
$ cd lkp-tests
</code></pre><p>그리고 lkp-tests 자체를 설치.</p><pre tabindex=0><code>$ sudo make install
</code></pre><p>이 커맨드는 단순히 지금 소스코드를 땡겨온 lkp-tests 소스코드 디렉토리의
<code>bin/lkp</code> 파일을 링크하는 <code>/usr/local/bin/lkp</code> 심볼릭 링크를 만들 뿐입니다.
따라서 셸에서 <code>lkp</code> 커맨드를 쓸 수 있게 해주죠. 이 <code>lkp</code> 파일이 결국 lkp-tests
의 대부분의 일을 해주는 핵심 커맨드입니다. 이 프로그램의 간단한 사용법은
다음과 같이 확인할 수 있습니다:</p><pre tabindex=0><code>$ lkp
Usage: lkp &lt;command&gt; [options]

INSTALLATION

        install JOB                     install binary dependencies for JOB

JOB

        split JOB                       split JOB matrix
        compile JOB                     compile JOB into shell script

TESTING

        run JOB                         run test JOB locally
        qemu JOB                        run test JOB in QEMU virtual machine

RESULT

        result|rt|_rt|__rt PATTERNs     show result dirs
        ls|ll PATTERNs                  ls result dirs
        rm-path result                  remove result dirs
        _rm PATTERNs                    remove _result dirs

        stat [options]                  show result stats
        compare [options]               compare result stats

DEBUG

        irb                             run irb with lib/*.rb loaded
        pry                             run pry with lib/*.rb loaded

More commands can be found in /home/sjpark/lkp-tests/{bin,sbin,tools}/
</code></pre><p>여기서 <code>&lt;command></code> 는 lkp-tests 소스코드 디렉토리 아래 <code>bin/</code>, <code>sbin/</code>,
<code>tools/</code>, 또는 <code>lkp-exec/</code> 아래 위치한 실행파일로, <code>lkp</code> 는 단순히 그
실행파일을 수행하면서 인자를 넘길 뿐입니다.</p><h1 id=테스트에-필요한-소프트웨어-설치>테스트에 필요한 소프트웨어 설치<a hidden class=anchor aria-hidden=true href=#테스트에-필요한-소프트웨어-설치>#</a></h1><p>다음 커맨드는 lkp-tests 가 의존하고 있는 기본적 소프트웨어 패키지들을 모두
설치합니다:</p><pre tabindex=0><code>$ sudo lkp install
</code></pre><p>Ubuntu 16.04 에서는 다음 패키지들을 까는군요:</p><pre tabindex=0><code>bc gawk gzip kmod time automake bison bsdtar build-essential bzip2
ca-certificates cpio fakeroot flex gcc git libc6-dev libc6-dev:i386
libklibc-dev libtool linux-libc-dev linux-libc-dev:i386 linux-tools-generic
make openssl patch rsync ruby ruby-dev wget
</code></pre><h1 id=lkp-tests-내부-벤치마크-실행>lkp-tests 내부 벤치마크 실행<a hidden class=anchor aria-hidden=true href=#lkp-tests-내부-벤치마크-실행>#</a></h1><p>이제 lkp-tests 에서 지원하는 벤치마크를 실제로 돌려봅시다.</p><h2 id=테스트-수행에-필요한-환경-설정>테스트 수행에 필요한 환경 설정<a hidden class=anchor aria-hidden=true href=#테스트-수행에-필요한-환경-설정>#</a></h2><p>실제 테스트를 돌리기 위해선 벤치마크를 깔고, 그 벤치마크가 사용하는 패키지를
깔고, 테스트에 사용될 도구들을 깔고, 여러 설정을 하는등의 작업이 필요합니다.</p><p>다음 명령은 lkp-tests 에서 ebizzy 라는 벤치마크를 사용하는 테스트를 위해
필요한 프로그램들을 설치하고 수행 환경을 준비합니다.</p><pre tabindex=0><code>$ sudo lkp install jobs/ebizzy.yaml
</code></pre><h2 id=job>job<a hidden class=anchor aria-hidden=true href=#job>#</a></h2><p>lkp-tests 에서 테스트 수행의 기본 단위는 <code>job</code> 이라고 이야기 하는데, <code>jobs/</code>
디렉토리 아래에 각 job 을 설명한 yaml 파일이 있습니다. 위의 커맨드에서 인자로
넣은 <code>ebizzy.yaml</code> 은 ebizzy 를 사용한 테스트에 필요한 사항들이 들어있습니다.
이 커맨드는 내부적으로 이 테스트에 필요한 패키지를 설치하고 ebizzy 벤치마크도
소스코드를 인터넷에서 받아다가 컴파일해 설치합니다.</p><p>Job 파일은 또한 해당 테스트가 어떤 시스템 환경들에서 어떤 벤치마크를 어떤
인자를 줘가며 수행해야할지 등에 대한 내용을 담고 있습니다. 예컨대
<code>jobs/aim7-fs-1brd.yaml</code> job 은 <code>xfs</code>, <code>ext4</code>, <code>btrfs</code>, <code>f2fs</code> 파일 시스템
각각에 대해 aim7 을 돌려보도록 되어 있습니다.</p><h2 id=테스트-수행>테스트 수행<a hidden class=anchor aria-hidden=true href=#테스트-수행>#</a></h2><p>다음 명령은 ebizzy job 으로 기술된 테스트를 실제 수행시킵니다:</p><pre tabindex=0><code>$ sudo lkp run jobs/ebizzy.yaml
</code></pre><h2 id=job-쪼개기>job 쪼개기<a hidden class=anchor aria-hidden=true href=#job-쪼개기>#</a></h2><p><code>ebizzy.yaml</code> 은 시스템 소유 CPU 코어 갯수 2배 갯수의 쓰레드를 사용해 ebizzy 를
10초간 돌리는 실험을 100번 반복하도록 되어 있습니다. 즉, 실험의 경우의 수가
하나입니다. 그러나, 앞서 설명한 <code>aim7-fs-1brd</code> 와 같이 다양한 구성을 사용하게
되어 있는 경우, 한가지 구성에 대해서만 반복 실험을 하고 싶을 수 있을 겁니다.
이런 경우 다음 명령으로 job 을 쪼갤 수 있습니다:</p><pre tabindex=0><code>$ sudo lkp split jobs/ebizzy.yaml
</code></pre><p>이 커맨드는 인자로 넣은 job 파일을 쪼개서 현재 디렉토리에 쪼개진 job 파일들을
저장합니다. 어떤 구성이 쪼개졌는지는 파일 이름으로 볼 수 있습니다.
<code>ebizzy.yaml</code> 을 쪼개면 <code>ebizzy-200%-100x-10s.yaml</code> 라는 이름의 한개의 job
파일이 생성됩니다. 앞서 이야기한 <code>aim7-fs-1brd.yaml</code> 을 쪼개면 다음과 같이
많은 수의 job 이 생성됩니다:</p><pre tabindex=0><code>aim7-fs-1brd-1BRD_48G-btrfs-creat-clo-4.yaml
aim7-fs-1brd-1BRD_48G-f2fs-creat-clo-1500.yaml
aim7-fs-1brd-1BRD_48G-btrfs-disk_cp-1500.yaml
aim7-fs-1brd-1BRD_48G-f2fs-disk_cp-3000.yaml
aim7-fs-1brd-1BRD_48G-btrfs-disk_rd-9000.yaml
aim7-fs-1brd-1BRD_48G-f2fs-disk_rd-9000.yaml
aim7-fs-1brd-1BRD_48G-btrfs-disk_rr-1500.yaml
aim7-fs-1brd-1BRD_48G-f2fs-disk_rr-3000.yaml
aim7-fs-1brd-1BRD_48G-btrfs-disk_rw-1500.yaml
aim7-fs-1brd-1BRD_48G-f2fs-disk_rw-3000.yaml
aim7-fs-1brd-1BRD_48G-btrfs-disk_src-500.yaml
aim7-fs-1brd-1BRD_48G-f2fs-disk_src-3000.yaml
aim7-fs-1brd-1BRD_48G-btrfs-disk_wrt-1500.yaml
aim7-fs-1brd-1BRD_48G-f2fs-disk_wrt-3000.yaml
aim7-fs-1brd-1BRD_48G-btrfs-sync_disk_rw-10.yaml
aim7-fs-1brd-1BRD_48G-f2fs-sync_disk_rw-600.yaml
aim7-fs-1brd-1BRD_48G-ext4-creat-clo-1000.yaml
aim7-fs-1brd-1BRD_48G-xfs-creat-clo-1500.yaml
aim7-fs-1brd-1BRD_48G-ext4-disk_cp-3000.yaml
aim7-fs-1brd-1BRD_48G-xfs-disk_cp-3000.yaml
aim7-fs-1brd-1BRD_48G-ext4-disk_rd-9000.yaml
aim7-fs-1brd-1BRD_48G-xfs-disk_rd-9000.yaml
aim7-fs-1brd-1BRD_48G-ext4-disk_rr-3000.yaml
aim7-fs-1brd-1BRD_48G-xfs-disk_rr-3000.yaml
aim7-fs-1brd-1BRD_48G-ext4-disk_rw-3000.yaml
aim7-fs-1brd-1BRD_48G-xfs-disk_rw-3000.yaml
aim7-fs-1brd-1BRD_48G-ext4-disk_src-3000.yaml
aim7-fs-1brd-1BRD_48G-xfs-disk_src-3000.yaml
aim7-fs-1brd-1BRD_48G-ext4-disk_wrt-3000.yaml
aim7-fs-1brd-1BRD_48G-xfs-disk_wrt-3000.yaml
aim7-fs-1brd-1BRD_48G-ext4-sync_disk_rw-600.yaml
aim7-fs-1brd-1BRD_48G-xfs-sync_disk_rw-600.yaml
</code></pre><h1 id=테스트-결과-확인>테스트 결과 확인<a hidden class=anchor aria-hidden=true href=#테스트-결과-확인>#</a></h1><p>테스트에 사용된 벤치마크 수행의 결과와 테스트 동안의 시스템 프로파일링 결과는
<code>/lkp/result/</code> 디렉토리 밑에 <code>&lt;job name>/&lt;configuration>/&lt;host name>/&lt;os distribution name>/&lt;kernel config>/&lt;gcc version>/&lt;kernel version>/&lt;unique id></code>
의 계층 구조로 저장됩니다. 또한, 이 실험 결과를 parsing 할 수 있는 경우엔
<code>.json</code> 파일을 만들어 줘서 parsing 된 결과 값도 보여줍니다.</p><p>또한, 최근의 테스트 결과는 테스트 돌린 디렉토리에 <code>result/</code> 라는 이름의,
<code>/lkp/result/</code> 아래 해당 디렉토리로의 심볼릭 링크를 만들어 줍니다.</p><h1 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h1><p>이렇게 lkp-tests 가 무엇인지, 그리고 어떻게 사용할 수 있는지 알아봤습니다.
이제, 리눅스 커널 개발 커뮤니티에서 사용하는 리그레션 테스트를 여러분의
환경에서도 손쉽게 돌려볼 수 있습니다.</p><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><p>[1] <a href=https://01.org/lkp/documentation/0-day-test-service>https://01.org/lkp/documentation/0-day-test-service</a><br>[2] <a href=https://github.com/intel/lkp-tests>https://github.com/intel/lkp-tests</a><br>[3] <a href=https://01.org/blogs/jdu1/2017/lkp-tests-linux-kernel-performance-test-and-analysis-tool>https://01.org/blogs/jdu1/2017/lkp-tests-linux-kernel-performance-test-and-analysis-tool</a><br>[4] <a href=https://wiki.archlinux.org/index.php/makepkg>https://wiki.archlinux.org/index.php/makepkg</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://sjp38.github.io/tags/linux/>Linux</a></li><li><a href=https://sjp38.github.io/tags/test/>Test</a></li><li><a href=https://sjp38.github.io/tags/evaluation/>Evaluation</a></li><li><a href=https://sjp38.github.io/tags/benchmark/>Benchmark</a></li></ul><nav class=paginav><a class=prev href=https://sjp38.github.io/posts/ko/lkml_news_v4.18-rc8/><span class=title>« Prev</span><br><span>LKML News after v4.18-rc8</span>
</a><a class=next href=https://sjp38.github.io/posts/en/linux_release_history/><span class=title>Next »</span><br><span>Linux Release History</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Linux Kernel Performance (LKP) Tests on x" href="https://x.com/intent/tweet/?text=Linux%20Kernel%20Performance%20%28LKP%29%20Tests&amp;url=https%3a%2f%2fsjp38.github.io%2fposts%2fko%2flkp-tests%2f&amp;hashtags=linux%2ctest%2cevaluation%2cbenchmark"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Linux Kernel Performance (LKP) Tests on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fsjp38.github.io%2fposts%2fko%2flkp-tests%2f&amp;title=Linux%20Kernel%20Performance%20%28LKP%29%20Tests&amp;summary=Linux%20Kernel%20Performance%20%28LKP%29%20Tests&amp;source=https%3a%2f%2fsjp38.github.io%2fposts%2fko%2flkp-tests%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Linux Kernel Performance (LKP) Tests on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fsjp38.github.io%2fposts%2fko%2flkp-tests%2f&title=Linux%20Kernel%20Performance%20%28LKP%29%20Tests"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Linux Kernel Performance (LKP) Tests on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fsjp38.github.io%2fposts%2fko%2flkp-tests%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Linux Kernel Performance (LKP) Tests on whatsapp" href="https://api.whatsapp.com/send?text=Linux%20Kernel%20Performance%20%28LKP%29%20Tests%20-%20https%3a%2f%2fsjp38.github.io%2fposts%2fko%2flkp-tests%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Linux Kernel Performance (LKP) Tests on telegram" href="https://telegram.me/share/url?text=Linux%20Kernel%20Performance%20%28LKP%29%20Tests&amp;url=https%3a%2f%2fsjp38.github.io%2fposts%2fko%2flkp-tests%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Linux Kernel Performance (LKP) Tests on ycombinator" href="https://news.ycombinator.com/submitlink?t=Linux%20Kernel%20Performance%20%28LKP%29%20Tests&u=https%3a%2f%2fsjp38.github.io%2fposts%2fko%2flkp-tests%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://sjp38.github.io/>hacklog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>